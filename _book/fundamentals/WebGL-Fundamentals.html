
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <title>WebGL Fundamentals · GitBook</title>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.0">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="WebGL-How-It-Works.html" />
    
    
    <link rel="prev" href="./" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    简介
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="./">
            
                <a href="./">
            
                    
                    Fundamentals
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.2.1" data-path="WebGL-Fundamentals.html">
            
                <a href="WebGL-Fundamentals.html">
            
                    
                    WebGL Fundamentals
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="WebGL-How-It-Works.html">
            
                <a href="WebGL-How-It-Works.html">
            
                    
                    WebGL How It Works
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="WebGL-Shaders-and-GLSL.html">
            
                <a href="WebGL-Shaders-and-GLSL.html">
            
                    
                    WebGL Shaders and GLSL
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../image-processing/">
            
                <a href="../image-processing/">
            
                    
                    Image Processing
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../image-processing/WebGL-Image-Processing.html">
            
                <a href="../image-processing/WebGL-Image-Processing.html">
            
                    
                    WebGL Image Processing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../image-processing/WebGL-Image-Processing-Continued.html">
            
                <a href="../image-processing/WebGL-Image-Processing-Continued.html">
            
                    
                    WebGL Image Processing Continued
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../2D-translation/">
            
                <a href="../2D-translation/">
            
                    
                    2D translation, rotation, scale, matrix math
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../2D-translation/WebGL-2D-Translation.html">
            
                <a href="../2D-translation/WebGL-2D-Translation.html">
            
                    
                    WebGL 2D Translation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../2D-translation/WebGL-2D-Rotation.html">
            
                <a href="../2D-translation/WebGL-2D-Rotation.html">
            
                    
                    WebGL 2D Rotation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../2D-translation/WebGL-2D-Scale.html">
            
                <a href="../2D-translation/WebGL-2D-Scale.html">
            
                    
                    WebGL 2D Scale
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../2D-translation/WebGL-2D-Matrices.html">
            
                <a href="../2D-translation/WebGL-2D-Matrices.html">
            
                    
                    WebGL 2D Matrices
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../3D/">
            
                <a href="../3D/">
            
                    
                    3D
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../3D/WebGL-Orthographic-3D.html">
            
                <a href="../3D/WebGL-Orthographic-3D.html">
            
                    
                    WebGL - Orthographic 3D
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../3D/WebGL-3D-Perspective.html">
            
                <a href="../3D/WebGL-3D-Perspective.html">
            
                    
                    WebGL 3D Perspective
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="../3D/WebGL-3D-Cameras.html">
            
                <a href="../3D/WebGL-3D-Cameras.html">
            
                    
                    WebGL 3D - Cameras
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../lighting/">
            
                <a href="../lighting/">
            
                    
                    Lighting
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../lighting/WebGL-3D-Directional-Lighting.html">
            
                <a href="../lighting/WebGL-3D-Directional-Lighting.html">
            
                    
                    WebGL 3D - Directional Lighting
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../lighting/WebGL-3D-Point-Lighting.html">
            
                <a href="../lighting/WebGL-3D-Point-Lighting.html">
            
                    
                    WebGL 3D - Point Lighting
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../Structure-and-Organization/">
            
                <a href="../Structure-and-Organization/">
            
                    
                    Structure and Organization
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../Structure-and-Organization/WebGL-Less-Code-More-Fun.html">
            
                <a href="../Structure-and-Organization/WebGL-Less-Code-More-Fun.html">
            
                    
                    WebGL - Less Code, More Fun
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="../Structure-and-Organization/WebGL-Drawing-Multiple-Things.html">
            
                <a href="../Structure-and-Organization/WebGL-Drawing-Multiple-Things.html">
            
                    
                    WebGL - Drawing Multiple Things
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="../Structure-and-Organization/WebGL-Scene-Graphs.html">
            
                <a href="../Structure-and-Organization/WebGL-Scene-Graphs.html">
            
                    
                    WebGL - Scene Graphs
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../techniques/">
            
                <a href="../techniques/">
            
                    
                    Techniques
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="../techniques/WebGL-2D-DrawImage.html">
            
                <a href="../techniques/WebGL-2D-DrawImage.html">
            
                    
                    WebGL 2D - DrawImage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="../techniques/WebGL-2D-Matrix-Stack.html">
            
                <a href="../techniques/WebGL-2D-Matrix-Stack.html">
            
                    
                    WebGL 2D - Matrix Stack
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="../techniques/WebGL-Text-HTML.html">
            
                <a href="../techniques/WebGL-Text-HTML.html">
            
                    
                    WebGL Text - HTML
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4" data-path="../techniques/WebGL-Text-Canvas-2D.html">
            
                <a href="../techniques/WebGL-Text-Canvas-2D.html">
            
                    
                    WebGL Text - Canvas 2D
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.5" data-path="../techniques/WebGL-Text-Using-a-Texture.html">
            
                <a href="../techniques/WebGL-Text-Using-a-Texture.html">
            
                    
                    WebGL Text - Using a Texture
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.6" data-path="../techniques/WebGL-Text-Using-a-Glyph-Texture.html">
            
                <a href="../techniques/WebGL-Text-Using-a-Glyph-Texture.html">
            
                    
                    WebGL Text - Using a Glyph Texture
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../misc/">
            
                <a href="../misc/">
            
                    
                    Misc
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="../misc/WebGL-Setup-And-Installation.html">
            
                <a href="../misc/WebGL-Setup-And-Installation.html">
            
                    
                    WebGL Setup And Installation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2" data-path="../misc/WebGL-Boilerplate.html">
            
                <a href="../misc/WebGL-Boilerplate.html">
            
                    
                    WebGL Boilerplate
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3" data-path="../misc/WebGL-Resizing-the-Canvas.html">
            
                <a href="../misc/WebGL-Resizing-the-Canvas.html">
            
                    
                    WebGL Resizing the Canvas
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.4" data-path="../misc/WebGL-Animation.html">
            
                <a href="../misc/WebGL-Animation.html">
            
                    
                    WebGL - Animation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.5" data-path="../misc/WebGL-3D-Textures.html">
            
                <a href="../misc/WebGL-3D-Textures.html">
            
                    
                    WebGL 3D - Textures
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.6" data-path="../misc/WebGL-Using-2-or-More-Textures.html">
            
                <a href="../misc/WebGL-Using-2-or-More-Textures.html">
            
                    
                    WebGL Using 2 or More Textures
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.7" data-path="../misc/WebGL-and-Alpha.html">
            
                <a href="../misc/WebGL-and-Alpha.html">
            
                    
                    WebGL and Alpha
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.8" data-path="../misc/WebGL-2D-vs-3D-libraries.html">
            
                <a href="../misc/WebGL-2D-vs-3D-libraries.html">
            
                    
                    WebGL - 2D vs 3D libraries
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.9" data-path="../misc/WebGL-Anti-Patterns.html">
            
                <a href="../misc/WebGL-Anti-Patterns.html">
            
                    
                    WebGL - Anti-Patterns
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../Helper-API-Docs/">
            
                <a href="../Helper-API-Docs/">
            
                    
                    Helper API Docs
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="../TWGL-A-tiny-WebGL-helper-library/">
            
                <a href="../TWGL-A-tiny-WebGL-helper-library/">
            
                    
                    TWGL, A tiny WebGL helper library
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="../术语/">
            
                <a href="../术语/">
            
                    
                    术语
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13" >
            
                <a target="_blank" href="https://github.com/greggman/webgl-fundamentals">
            
                    
                    github
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >WebGL Fundamentals</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="webgl-&#x57FA;&#x7840;">webGL &#x57FA;&#x7840;</h1><p>WebGL is often thought of as a 3D API&#x3002;People think &quot;I&apos;ll use WebGL and magic I&apos;ll get cool 3d&quot;&#x3002;In reality WebGL is just a rasterization engine&#x3002;It draws points&#xFF0C;lines&#xFF0C;and triangles based on code you supply&#x3002;Getting WebGL to do anything else is up to you to provide code to use points&#xFF0C;lines&#xFF0C;and triangles to accomplish your task.</p><p>WebGL &#x4E00;&#x76F4;&#x88AB;&#x8BA4;&#x4E3A;&#x63D0;&#x4F9B;&#x4E86; 3D &#x56FE;&#x50CF;&#x7684;API&#x3002;&#x4EBA;&#x4EEC;&#x603B;&#x4F1A;&#x60F3; &#x201C;&#x7528;&#x4E86; WebGL &#x6211;&#x5C31;&#x80FD;&#x795E;&#x5947;&#x5730;&#x5F97;&#x5230;&#x9177;&#x70AB;&#x7684;&#x4E09;&#x7EF4;&#x6548;&#x679C;&#x4E86;&#x201D;&#x3002;&#x4F46;&#xFF0C;&#x4E8B;&#x5B9E;&#x4E0A;&#xFF0C;WebGL &#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x6805;&#x683C;&#x5316;&#x5F15;&#x64CE;&#x3002;&#x4ED6;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x4F60;&#x7684;&#x4EE3;&#x7801;&#x753B;&#x70B9;&#xFF0C;&#x7EBF;&#x548C;&#x4E09;&#x89D2;&#x5F62;&#x3002;WebGL &#x505A;&#x7684;&#x4EFB;&#x4F55;&#x4E8B;&#x60C5;&#x90FD;&#x662F;&#x53D6;&#x51B3;&#x4E8E;&#x4F60;&#x5199;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x753B;&#x70B9;&#xFF0C;&#x7EBF;&#x548C;&#x4E09;&#x89D2;&#x5F62;&#x53BB;&#x5B8C;&#x6210;&#x4F60;&#x60F3;&#x8981;&#x7684;&#x6548;&#x679C;&#x3002;</p><p>WebGL runs on the GPU on your computer&#x3002;As such you need to provide the code that runs on that GPU&#x3002;You provide that code in the form of pairs of functions&#x3002;Those 2 functions are called a&#x9876;&#x70B9;&#x7740;&#x8272;&#x5668;and a &#x7247;&#x5143;&#x7740;&#x8272;&#x5668; and they are each written in a very strictly typed C/C++ like language called GLSL&#x3002;(GL Shader Language)&#x3002;Paired together they are called a program.</p><p>WebGL &#x4F1A;&#x5728;&#x4F60;&#x7535;&#x8111;&#x7684; GPU &#x4E0A;&#x8FD0;&#x884C;&#x3002;&#x6240;&#x4EE5;&#xFF0C;&#x4F60;&#x9700;&#x8981;&#x63D0;&#x4F9B;&#x4E00;&#x4E9B;&#x80FD;&#x591F;&#x5728; GPU &#x4E0A;&#x8FD0;&#x884C;&#x7684;&#x4EE3;&#x7801;&#x3002;&#x8FD9;&#x4E9B;&#x4EE3;&#x7801;&#x901A;&#x5E38;&#x662F;&#x6210;&#x5BF9;&#x51FA;&#x73B0;&#x7684;&#x51FD;&#x6570;&#x3002;&#x8FD9;&#x4E24;&#x4E2A;&#x51FD;&#x6570;&#x53EF;&#x4EE5;&#x53EB;&#x505A;&#x9876;&#x70B9;&#x7740;&#x8272;&#x5668;&#xFF08;vertex shader&#xFF09;&#x548C;&#x7247;&#x5143;&#x7740;&#x8272;&#x5668;&#xFF08;fragment shader&#xFF09;&#x3002;&#x5B83;&#x4EEC;&#x662F;&#x7528;&#x4E00;&#x79CD;&#x7C7B;&#x4F3C;&#x5F3A;&#x7C7B;&#x578B; C/C++ &#x8BED;&#x8A00;&#x5199;&#x7684;&#xFF0C;&#x53EB;&#x505A; <a href="http://webglfundamentals.org/webgl/lessons/webgl-shaders-and-glsl.html" target="_blank">GLSL</a>&#x3002;&#xFF08;GL Sahder Language&#xFF09;&#x3002;&#x5F53;&#x5B83;&#x4EEC;&#x6210;&#x5BF9;&#x51FA;&#x73B0;&#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x88AB;&#x79F0;&#x4E3A;&#x7A0B;&#x5E8F;&#x3002;</p><p>A&#x9876;&#x70B9;&#x7740;&#x8272;&#x5668;&apos;s job is to compute vertex positions&#x3002;Based on the positions the function outputs WebGL can then rasterize various kinds of primitives including points&#xFF0C;lines&#xFF0C;or triangles&#x3002;When rasterizing these primitives it calls a second user supplied function called a &#x7247;&#x5143;&#x7740;&#x8272;&#x5668;&#x3002;A &#x7247;&#x5143;&#x7740;&#x8272;&#x5668;&apos;s job is to compute a color for each pixel of the primitive currently being drawn.</p><p>&#x9876;&#x70B9;&#x7740;&#x8272;&#x5668; &#x4E3B;&#x8981;&#x4EFB;&#x52A1;&#x5C31;&#x662F;&#x8BA1;&#x7B97;&#x70B9;&#x7684;&#x4F4D;&#x7F6E;&#x3002;&#x627E;&#x5230;&#x70B9;&#x540E;&#xFF0C;&#x6839;&#x636E;&#x4F60;&#x63D0;&#x4F9B;&#x7684;&#x51FD;&#x6570;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x753B;&#x51FA;&#x5404;&#x79CD;&#x539F;&#x59CB;&#x56FE;&#x5F62;&#xFF0C;&#x6BD4;&#x5982;&#xFF0C;&#x70B9;&#xFF0C;&#x7EBF;&#xFF0C;&#x4E09;&#x89D2;&#x5F62;&#x3002;&#x5F53;&#x5728;&#x6E32;&#x67D3;&#x56FE;&#x5F62;&#x7684;&#x65F6;&#xFF0C;&#x63A5;&#x7740;&#x5C31;&#x8C03;&#x7528;&#x4F60;&#x63D0;&#x4F9B;&#x7684;&#x53E6;&#x5916;&#x4E00;&#x4E2A;&#x51FD;&#x6570;--&#x7247;&#x5143;&#x7740;&#x8272;&#x5668;&#xFF0C;&#x4ED6;&#x6765;&#x51B3;&#x5B9A;&#x56FE;&#x5F62;&#x4E0A;&#x6BCF;&#x4E2A;&#x50CF;&#x7D20;&#x70B9;&#xFF0C;&#x5230;&#x5E95;&#x662F;&#x4EC0;&#x4E48;&#x989C;&#x8272;&#x3002;</p><p>Nearly all of the entire WebGL API is about setting up state for these pairs of functions to run. For each thing you want to draw you setup a bunch of state then execute a pair of functions by calling gl.drawArrays or gl.drawElements which executes your shaders on the GPU.</p><p>&#x51E0;&#x4E4E;&#x6240;&#x6709;&#x7684; WebGL API &#x90FD;&#x662F;&#x6267;&#x884C;&#x4E0A;&#x8FF0;&#x6210;&#x5BF9;&#x51FD;&#x6570;&#x3002; &#x5982;&#x679C;&#x4F60;&#x60F3;&#x753B;&#x67D0;&#x4E9B;&#x4E1C;&#x897F;&#xFF0C;&#x9700;&#x8981;&#x5EFA;&#x7ACB;&#x4E00;&#x7CFB;&#x5217;&#x7684;&#x72B6;&#x6001;&#xFF0C;&#x7136;&#x540E;&#x901A;&#x8FC7;&#x8C03;&#x7528; <code>gl.drawArrays</code> &#x6216;&#x8005; <code>gl.drawElements</code>&#x53BB;&#x6267;&#x884C;&#x90A3;&#x4E9B;&#x6210;&#x5BF9;&#x7684;&#x51FD;&#x6570;&#xFF0C;&#x5B83;&#x4EEC;&#x4F1A;&#x5728; GPU &#x4E0A;&#x6267;&#x884C;&#x4F60;&#x5199;&#x597D;&#x7684;&#x7740;&#x8272;&#x5668;&#x3002;</p><p>Any data you want those functions to have access to must be provided to the GPU. There are 4 ways a shader can receive data.</p><p>&#x5982;&#x679C;&#x4F60;&#x60F3;&#x63D0;&#x4F9B;&#x4E00;&#x4E9B;&#x5177;&#x4F53;&#x7684;&#x6570;&#x636E;&#x7ED9;&#x51FD;&#x6570;&#x6E32;&#x67D3;&#xFF0C;&#x90A3;&#x4E48;&#x4F60;&#x9996;&#x5148;&#x5F97;&#x8BA9; GPU &#x770B;&#x61C2;&#x3002;&#x4F60;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x56DB;&#x79CD;&#x65B9;&#x5F0F;&#xFF0C;&#x5C06;&#x4F60;&#x7684;&#x6570;&#x636E;&#x53D1;&#x9001;&#x7ED9;&#x7740;&#x8272;&#x5668;&#xFF1A;</p><ol><li><p>&#x5C5E;&#x6027;&#xFF08;Attribute&#xFF09;&#x548C;Buffers
Buffers &#x8FD9;&#x4E2A;&#x7C7B;&#x578B;&#x5728; js &#x4E2D;&#x5DF2;&#x7ECF;&#x51FA;&#x73B0;&#x5F88;&#x4E45;&#x4E86;&#xFF0C;&#x4ED6;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x6570;&#x7EC4;&#xFF0C;&#x7528;&#x6765;&#x5B58;&#x653E;&#x4E8C;&#x8FDB;&#x5236;&#x6570;&#x636E;&#x3002;&#x800C;&#xFF0C;GPU &#x4E5F;&#x4E3B;&#x8981;&#x63A5;&#x6536;&#x7684;&#x6570;&#x636E;&#x5C31;&#x662F; Buffer&#x3002;&#x901A;&#x5E38;&#xFF0C;&#x6BCF;&#x4E00;&#x4E2A; Buffer &#x5305;&#x542B;&#x7684;&#x6570;&#x636E;&#x4FE1;&#x606F;&#x6709;&#xFF0C;&#x4F4D;&#x7F6E;&#xFF0C;&#x6CD5;&#x7EBF;&#xFF0C;&#x7EB9;&#x7406;&#x5750;&#x6807;&#xFF0C;&#x989C;&#x8272; &#x7B49;&#x7B49;&#x3002;&#x5F53;&#x7136;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x653E;&#x4EFB;&#x4F55;&#x4F60;&#x60F3;&#x653E;&#x7684;&#x6570;&#x636E;&#x5728;&#x91CC;&#x9762;&#x3002;
&#x5C5E;&#x6027;&#x5219;&#x662F;&#x7528;&#x6765;&#x5B9A;&#x4E49;&#x5982;&#x4F55;&#x83B7;&#x53D6;&#x4F60;&#x7684; data &#xFF0C;buffers &#x5177;&#x4F53;&#x5185;&#x5BB9;&#x548C;&#x63D0;&#x4F9B;&#x7ED9;&#x9876;&#x70B9;&#x7740;&#x8272;&#x5668;&#x3002;&#x6BD4;&#x5982;&#xFF0C;&#x4F60;&#x60F3;&#x628A; 3 &#x4E2A; 32bit &#x7684;&#x6D6E;&#x70B9;&#x6570;&#x636E;&#x4F5C;&#x4E3A;&#x4F4D;&#x7F6E;(x&#xFF0C;y&#xFF0C;z)&#xFF0C;&#x653E;&#x5728; Buffer &#x91CC;&#x9762;&#x3002;&#x90A3;&#x4E48;&#xFF0C;&#x4F60;&#x5C31;&#x5F97;&#x63D0;&#x4F9B;&#x7279;&#x5B9A;&#x7684;&#x5C5E;&#x6027;&#xFF0C;&#x544A;&#x8BC9;&#x54EA;&#x4E2A; Buffer &#x91CC;&#x9762;&#x6709;&#x8FD9;&#x4E9B;&#x6570;&#x636E;&#xFF1F;&#x54EA;&#x79CD;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x5E94;&#x8BE5;&#x63D0;&#x53D6;(&#x6BD4;&#x5982;&#xFF0C;3&#x4E2A;&#x6D6E;&#x70B9;&#x7C7B;&#x578B;&#x7684;&#x6570;&#x636E;)&#xFF1F; &#x6570;&#x636E;&#x5728; Buffer &#x7684;&#x5177;&#x4F53;&#x4F4D;&#x7F6E;&#x5728;&#x54EA;&#xFF1F;&#x73B0;&#x5728;&#x7684;&#x4F4D;&#x7F6E;&#x8DDD;&#x79BB;&#x4E0B;&#x4E2A;&#x4F4D;&#x7F6E;&#x7684;&#x95F4;&#x9694;&#x662F;&#x591A;&#x5C11;&#xFF1F;
Buffers &#x5E76;&#x4E0D;&#x662F;&#x968F;&#x673A;&#x83B7;&#x53D6;&#x7684;&#x3002;&#x53E6;&#x5916;&#xFF0C;&#x9876;&#x70B9;&#x7740;&#x8272;&#x5668;&#x4F1A;&#x6839;&#x636E;&#x63D0;&#x4F9B;&#x7684;&#x6570;&#x636E;&#x6267;&#x884C;&#x7279;&#x5B9A;&#x7684;&#x6B21;&#x6570;&#x3002;&#x6BCF;&#x6B21;&#x4E0B;&#x4E00;&#x4E2A;&#x503C;&#x4ECE;&#x6307;&#x5B9A;&#x7684; Buffer &#x4E2D;&#x63D0;&#x53D6;&#xFF0C;&#x6307;&#x5B9A;&#x7ED9;&#x67D0;&#x4E2A;&#x5C5E;&#x6027;&#x5E76;&#x6267;&#x884C;&#x3002;</p></li>
<li><p>Uniforms
Uniforms &#x662F;&#x4E00;&#x4E2A;&#x6709;&#x6548;&#x7684;&#x5168;&#x5C40;&#x53D8;&#x91CF;&#x3002;&#x6211;&#x4EEC;&#x4F1A;&#x5728;&#x7740;&#x8272;&#x5668;&#x7A0B;&#x5E8F;&#x6267;&#x884C;&#x524D;&#xFF0C;&#x5148;&#x628A;&#x4ED6;&#x7ED9;&#x5B9A;&#x4E49;&#x4E86;&#x3002;</p></li>
<li><p>&#x7EB9;&#x7406;&#xFF08;Textures&#xFF09;
&#x7EB9;&#x7406;&#x662F;&#x4E00;&#x4E32;&#x6570;&#x7EC4;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x5728;&#x4F60;&#x7684;&#x7740;&#x8272;&#x5668;&#x7A0B;&#x5E8F;&#x4E2D;&#x7684;&#x4EFB;&#x4F55;&#x4F4D;&#x7F6E;&#x8BBF;&#x95EE;&#x4ED6;&#x3002;&#x6211;&#x4EEC;&#x6700;&#x7ECF;&#x5E38;&#x505A;&#x7684;&#x4E8B;&#x60C5;&#xFF0C;&#x5C31;&#x662F;&#x83B7;&#x53D6;&#x56FE;&#x7247;&#x6570;&#x636E;&#x3002;&#x4E0D;&#x8FC7;&#xFF0C;&#x7EB9;&#x7406;&#x4E0D;&#x4EC5;&#x4EC5;&#x53EA;&#x662F;&#x6570;&#x636E;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x5305;&#x542B;&#x9664;&#x989C;&#x8272;&#x4EE5;&#x5916;&#x7684;&#x5176;&#x4ED6;&#x6570;&#x636E;&#x3002;</p></li>
<li>Varyings
&#x9876;&#x70B9;&#x7740;&#x8272;&#x5668;&#x5E38;&#x5E38;&#x5229;&#x7528; Varyings &#x53D8;&#x91CF;&#x5C06;&#x6570;&#x636E;&#x4F20;&#x7ED9;&#x7247;&#x5143;&#x7740;&#x8272;&#x5668;&#x3002;&#x5728;&#x9876;&#x70B9;&#x7740;&#x8272;&#x5668;&#x8BBE;&#x7F6E;&#x7684; varyings &#x53D8;&#x91CF;&#x503C;&#xFF0C;&#x901A;&#x5E38;&#x53D6;&#x51B3;&#x4E8E;&#x88AB;&#x6E32;&#x67D3;&#x7684;&#x57FA;&#x672C;&#x56FE;&#x5F62;&#x662F;&#x5565;&#xFF0C;&#x6BD4;&#x5982;&#x6709;&#xFF0C;&#x70B9;&#xFF0C;&#x7EBF;&#xFF0C;&#x4E09;&#x89D2;&#x5F62;&#x3002;varyings &#x4F1A;&#x5728;&#x7247;&#x5143;&#x7740;&#x8272;&#x5668; &#x6267;&#x884C;&#x65F6;&#xFF0C;&#x63D2;&#x5165;&#x8FDB;&#x53BB;&#x3002;
</li></ol>
<h2 id="webgl-hello-world">WebGL Hello World</h2><p>WebGL only cares about 2 things. Clipspace coordinates and colors. Your job as a programmer using WebGL is to provide WebGL with those 2 things. You provide your 2 &quot;shaders&quot; to do this. A Vertex shader which provides the clipspace coordinates and a fragment shader that provides the color.</p><p>WebGL &#x53EA;&#x5173;&#x5FC3;&#x4E24;&#x4E2A;&#x4E1C;&#x897F;&#x3002;&#x88C1;&#x526A;&#x5750;&#x6807;&#x7CFB;&#x548C;&#x989C;&#x8272;&#x3002;&#x800C;&#x6211;&#x4EEC;&#x7A0B;&#x5E8F;&#x5458;&#x4E5F;&#x53EA;&#x9700;&#x8981;&#x5411; WebGL &#x63D0;&#x4F9B;&#x8005;&#x4E24;&#x6837;&#x4E1C;&#x897F;--&#x4E24;&#x4E2A;&#x201C;&#x7740;&#x8272;&#x5668;&#x201D;&#x3002;&#x9876;&#x70B9;&#x7740;&#x8272;&#x5668;&#x63D0;&#x4F9B;&#x88C1;&#x526A;&#x5750;&#x6807;&#xFF0C;&#x7247;&#x5143;&#x7740;&#x8272;&#x5668;&#x63D0;&#x4F9B;&#x4E86;&#x5BF9;&#x5E94;&#x7684;&#x989C;&#x8272;&#x3002;</p><p>Clipspace coordinates always go from -1 to +1 no matter what size your canvas is. Here is a simple WebGL example that shows WebGL in its simplest form.</p><p>&#x88C1;&#x526A;&#x5750;&#x6807;&#x7CFB;&#x53D6;&#x503C;&#x8303;&#x56F4;&#x6C38;&#x8FDC;&#x662F; -1 &#x5230; 1&#xFF0C;&#x4E0D;&#x7BA1;&#x4F60;&#x7684;canvas&#x6709;&#x591A;&#x5927;&#x3002;&#x4E0B;&#x5217;&#x662F;&#x4E00;&#x4E2A;&#x7CBE;&#x7B80;&#x7248;&#x7684; WebGL &#x4F8B;&#x5B50;:</p><p>&#x6211;&#x4EEC;&#x5148;&#x770B;&#x4E00;&#x4E0B;&#x9876;&#x70B9;&#x7740;&#x8272;&#x5668;</p><pre><code>// &#x4ECE; buffer &#x4E2D;&#x63A5;&#x53D7;&#x6570;&#x636E;&#x7684;&#x5C5E;&#x6027;
attribute vec4 a_position;

// &#x6240;&#x6709;&#x7684; shader &#x90FD;&#x9700;&#x8981;&#x6709;&#x4E00;&#x4E2A; main &#x51FD;&#x6570;
void main() {

  // gl_Position &#x5728; vertex &#x4E2D;&#x662F;&#x4E00;&#x4E2A;&#x7279;&#x6B8A;&#x7684;&#x53D8;&#x91CF;
  // &#x8BBE;&#x7F6E;&#x5177;&#x4F53;&#x7684;&#x503C;
  gl_Position = a_position;
}</code></pre>
<p>&#x6211;&#x4EEC;&#x7528; js &#x811A;&#x672C;&#x7FFB;&#x8BD1;&#x4E00;&#x4E0B;&#x4E0A;&#x9762;&#x7684; GLSL &#x4EE3;&#x7801;:</p><pre><code>// *** &#x4F2A;&#x4EE3;&#x7801;!! ***

var positionBuffer = [
  0&#xFF0C;0&#xFF0C;0&#xFF0C;0&#xFF0C;
  0&#xFF0C;0.5&#xFF0C;0&#xFF0C;0&#xFF0C;
  0.7&#xFF0C;0&#xFF0C;0&#xFF0C;0&#xFF0C;
];
var attributes = {};
var gl_Position;

drawArrays(...&#xFF0C;offset&#xFF0C;count) {
  var stride = 4;
  var size = 4;
  for (var i = 0; i &lt; count; ++i) {
     // &#x4ECE; positionBuffer &#x83B7;&#x53D6; 4&#x4E2A;&#x4E3A;&#x4E00;&#x4E2A;&#x5355;&#x4F4D;&#x7684;&#x5750;&#x6807;&#x503C;&#x7ED9;a_position
     attributes.a_position = positionBuffer.slice((offset + i) * stride&#xFF0C;size);
     runVertexShader();
     ...
     doSomethingWith_gl_Position();
}</code></pre>
<p>&#x5B9E;&#x9645;&#x7684;&#x4EE3;&#x7801;&#x53EF;&#x80FD;&#x6BD4;&#x8FD9;&#x8981;&#x590D;&#x6742;&#x4E00;&#x70B9;&#xFF0C;&#x56E0;&#x4E3A; <code>positionBuffer</code> &#x9700;&#x8981;&#x88AB;&#x8F6C;&#x6362;&#x4E3A;&#x4E8C;&#x8FDB;&#x5236;&#x6570;&#x636E;&#x3002;&#x6240;&#x4EE5;&#xFF0C;&#x4ECE; buffer &#x91CC;&#x9762;&#x83B7;&#x53D6;&#x6570;&#x636E;&#x7684;&#x8BA1;&#x7B97;&#x53EF;&#x80FD;&#x4F1A;&#x6709;&#x70B9;&#x4E0D;&#x540C;&#x3002;&#x4E0D;&#x8FC7;&#xFF0C;&#x8FD9;&#x5E94;&#x8BE5;&#x80FD;&#x591F;&#x8BF4;&#x6E05;&#x695A;&#x9876;&#x70B9;&#x7740;&#x8272;&#x5668;&#x5230;&#x5E95;&#x662F;&#x600E;&#x4E48;&#x6267;&#x884C;&#x7684;&#x3002;</p><p>&#x63A5;&#x7740;&#xFF0C;&#x6765;&#x770B;&#x4E00;&#x4E0B;&#x7247;&#x5143;&#x7740;&#x8272;&#x5668;&#x3002;</p><pre><code>// &#x7247;&#x5143;&#x7740;&#x8272;&#x5668;&#x6CA1;&#x6709;&#x9ED8;&#x8BA4;&#x7CBE;&#x5EA6;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x624B;&#x52A8;&#x6307;&#x5B9A;&#x4E00;&#x4E2A;&#x3002;&#x4E2D;&#x7B49;&#x7CBE;&#x5EA6;&#x5C31;ok&#x3002;&#x8BBE;&#x7F6E;&#x4E3A; &quot;mediump&quot;.
// &#x5B9E;&#x9645;&#x4E0A;&#x5C31;&#x662F; &quot;medium precision&quot;
precision mediump float;

void main() {
  // gl_FragColor &#x662F;&#x4E00;&#x4E2A;&#x53D8;&#x91CF;
  gl_FragColor = vec4(1&#xFF0C;0&#xFF0C;0.5&#xFF0C;1); // &#x8FD4;&#x56DE;&#x67D0;&#x4E00;&#x79CD;&#x7D2B;&#x8272;
}</code></pre>
<p>&#x4E0A;&#x9762;&#xFF0C;&#x6211;&#x4EEC;&#x8BBE;&#x7F6E;&#x7684; <code>gl_FragColor</code> &#x53D8;&#x91CF;&#x503C;&#x662F; <code>1&#xFF0C;0&#xFF0C;0.5&#xFF0C;1</code>&#x3002;1 &#x4EE3;&#x8868;&#x7EA2;&#x8272;&#xFF0C;0 &#x4EE3;&#x8868;&#x7EFF;&#x8272;&#xFF0C;0.5 &#x4EE3;&#x8868;&#x84DD;&#x8272;&#xFF0C;1&#x4EE3;&#x8868;&#x900F;&#x660E;&#x5EA6;&#xFF08;alpha&#xFF09;&#x3002;WebGL &#x7684;&#x989C;&#x8272;&#x503C;&#x603B;&#x662F;&#x4ECE; 0 &#x5230; 1&#x3002;</p><p>Now that we have written the 2 shader functions lets get started with WebGL</p><p>&#x73B0;&#x5728;&#xFF0C;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x5199;&#x597D;&#x4E86;&#x4E24;&#x4E2A;&#x7740;&#x8272;&#x5668;&#x51FD;&#x6570;&#xFF0C;&#x63A5;&#x7740;&#xFF0C;&#x8BA9;&#x6211;&#x4EEC;&#x5F00;&#x59CB;&#x770B;&#x770B; WebGL&#x3002;</p><p>&#x9996;&#x5148;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x4E00;&#x4E2A; canvas</p><pre><code>&lt;canvas id=&quot;c&quot; width=&quot;400&quot; height=&quot;300&quot;&gt;&lt;/canvas&gt;</code></pre>
<p>&#x7136;&#x540E;&#x5728; JavaScript &#x91CC;&#x9762;&#x83B7;&#x53D6;&#x5B83;</p><pre><code>var canvas = document.getElementById(&quot;c&quot;);</code></pre>
<p>&#x63A5;&#x7740;&#xFF0C;&#x521B;&#x5EFA;&#x4E00;&#x4E2A; WebGLRenderingContext</p><pre><code> var gl = canvas.getContext(&quot;webgl&quot;);
 if (!gl) {
    // webgl &#x4E0D;&#x5B58;&#x5728;</code></pre>
<p>&#x73B0;&#x5728;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x7F16;&#x8BD1;&#x8FD9;&#x4E9B; shaders &#x6765;&#x8BA9;&#x4ED6;&#x4EEC;&#x5728; GPU &#x4E0A;&#x8FD0;&#x884C;&#x3002;&#x6240;&#x4EE5;&#xFF0C;&#x4E3A;&#x4E86;&#x7F16;&#x8BD1;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5C06;&#x8FD9;&#x4E9B; shaders &#x53D8;&#x4E3A;&#x5B57;&#x7B26;&#x4E32;&#x3002;&#x6BD4;&#x5982;&#xFF0C;&#x901A;&#x8FC7;&#x5B57;&#x7B26;&#x4E32;&#x62FC;&#x63A5;&#xFF0C;AJAX &#x62C9;&#x53D6;&#xFF0C;&#x4F7F;&#x7528;&#x591A;&#x884C;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x6A21;&#x677F;&#xFF0C;&#x6216;&#x8005; &#x6309;&#x7167;&#x4E0B;&#x5217;&#x7684;&#x5199;&#x6CD5;&#xFF0C;&#x5C06; shader &#x4F7F;&#x7528;&#x975E; JavaScript &#x7684;&#x6807;&#x7B7E;&#x8FDB;&#x884C;&#x5305;&#x88F9;&#x3002;</p><pre><code>&lt;script id=&quot;2d-vertex-shader&quot; type=&quot;notjs&quot;&gt;

  void main() {
    gl_Position = a_position;
  }

&lt;/script&gt;

&lt;script id=&quot;2d-fragment-shader&quot; type=&quot;notjs&quot;&gt;
  precision mediump float;
  void main() {
    gl_FragColor = vec4(1&#xFF0C;0&#xFF0C;0.5&#xFF0C;1); // return redish-purple
  }
&lt;/script&gt;</code></pre>
<p>In fact, most 3D engines generate GLSL shaders on the fly using various types of templates, concatenation, etc. For the samples on this site though none of them are complex enough to need to generate GLSL at runtime.</p><p>&#x4E8B;&#x5B9E;&#x4E0A;&#xFF0C;&#x5F88;&#x591A; 3D &#x5F15;&#x64CE;&#x4F1A;&#x4F7F;&#x7528;&#x4E0D;&#x540C;&#x7684;&#x65B9;&#x5F0F;&#x6765;&#x52A8;&#x6001;&#x751F;&#x6210; GLSL &#x7740;&#x8272;&#x5668;&#xFF0C;&#x6BD4;&#x5982;&#x6A21;&#x677F;&#xFF0C;&#x62FC;&#x63A5;&#x7B49;&#x3002;&#x4E0D;&#x8FC7;&#xFF0C;&#x5728;&#x672C;&#x6559;&#x7A0B;&#x4E2D;&#xFF0C;&#x6CA1;&#x6709;&#x54EA;&#x4E2A;&#x4F8B;&#x5B50;&#x590D;&#x6742;&#x5230;&#x9700;&#x8981;&#x52A8;&#x6001;&#x751F;&#x6210; GLSL&#x3002;</p><p>&#x4E0B;&#x4E00;&#x6B65;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x9700;&#x8981;&#x5199;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x3002;&#x7528;&#x5B83;&#x53BB;&#x521B;&#x5EFA;&#x7740;&#x8272;&#x5668;&#xFF0C;&#x63D0;&#x4EA4; GLSL &#x4EE3;&#x7801;&#xFF0C;&#x5E76;&#x4E14;&#x7F16;&#x8BD1; &#x7740;&#x8272;&#x5668;&#x3002;&#x4E0B;&#x9762;&#x51FD;&#x6570;&#xFF0C;&#x6211;&#x6CA1;&#x6709;&#x5199;&#x4EC0;&#x4E48;&#x6CE8;&#x91CA;&#xFF0C;&#x56E0;&#x4E3A;&#x4ECE;&#x547D;&#x540D;&#x4E0A;&#x6765;&#x770B;&#xFF0C;&#x4ED6;&#x5DF2;&#x7ECF;&#x5F88;&#x6E05;&#x695A;&#x4E86;&#x3002;</p><pre><code>function createShader(gl&#xFF0C;type&#xFF0C;source) {
  var shader = gl.createShader(type);
  gl.shaderSource(shader&#xFF0C;source);
  gl.compileShader(shader);
  var success = gl.getShaderParameter(shader&#xFF0C;gl.COMPILE_STATUS);
  if (success) {
    return shader;
  }

  console.log(gl.getShaderInfoLog(shader));
  gl.deleteShader(shader);
}</code></pre>
<p>&#x73B0;&#x5728;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x8BE5;&#x51FD;&#x6570;&#x53BB;&#x521B;&#x5EFA;&#x4E24;&#x4E2A;&#x7740;&#x8272;&#x5668;&#x3002;</p><pre><code>var vertexShaderSource = document.getElementById(&quot;2d-vertex-shader&quot;).text;
var fragmentShaderSource = document.getElementById(&quot;2d-fragment-shader&quot;).text;

var vertexShader = createShader(gl&#xFF0C;gl.VERTEX_SHADER&#xFF0C;vertexShaderSource);
var fragmentShader = createShader(gl&#xFF0C;gl.FRAGMENT_SHADER&#xFF0C;fragmentShaderSource);</code></pre>
<p>&#x63A5;&#x7740;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5C06;&#x4E24;&#x4E2A;&#x7740;&#x8272;&#x5668;&#x548C;&#x5B9E;&#x9645;&#x7684;&#x7A0B;&#x5E8F;&#x7ED3;&#x5408;&#x8D77;&#x6765;&#x3002;</p><pre><code>function createProgram(gl&#xFF0C;vertexShader&#xFF0C;fragmentShader) {
  var program = gl.createProgram();
  gl.attachShader(program&#xFF0C;vertexShader);
  gl.attachShader(program&#xFF0C;fragmentShader);
  gl.linkProgram(program);
  var sucesss = gl.getProgramParameter(program&#xFF0C;gl.LINK_STATUS);
  if (success) {
    return program;
  }

  console.log(gl.getProgramInfoLog(program));
  gl.deleteProgram(program);
}</code></pre>
<p>&#x7136;&#x540E;&#xFF0C;&#x8C03;&#x7528;</p><pre><code>var program = createProgram(gl&#xFF0C;vertexShader&#xFF0C;fragmentShader);</code></pre>
<p>&#x73B0;&#x5728;&#xFF0C;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x5728; GPU &#x4E0A;&#xFF0C;&#x5199;&#x597D;&#x7684; GLSL &#x4EE3;&#x7801;&#x3002;&#x63A5;&#x4E0B;&#x6765;&#x6211;&#x4EEC;&#x8981;&#x505A;&#x7684;&#x4E8B;&#x60C5;&#x5C31;&#x662F;&#x4F7F;&#x7528; WebGL &#x63D0;&#x4F9B;&#x76F8;&#x5173;&#x7684;&#x6570;&#x636E;&#x7ED9; GLSL&#x3002;&#x5728;&#x4E0B;&#x9762;&#x7684;&#x8FD9;&#x4E2A;&#x4F8B;&#x5B50;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x53EA;&#x5411; GLSL &#x7A0B;&#x5E8F;&#x63D0;&#x4F9B;&#x4E00;&#x4E2A; <code>a_position</code> &#x7684;&#x5C5E;&#x6027;&#x3002;&#x9996;&#x5148;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x63D0;&#x4F9B;&#x4F4D;&#x7F6E;&#x5C5E;&#x6027;&#xFF0C;&#x7ED9;&#x6211;&#x4EEC;&#x521A;&#x521A;&#x521B;&#x5EFA;&#x7684;&#x7A0B;&#x5E8F;.</p><pre><code>var positionAttributeLocation = gl.getAttribLocation(program&#xFF0C;&quot;a_position&quot;);</code></pre>
<p>&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5728;&#x521D;&#x59CB;&#x5316;&#x65F6;&#x63D0;&#x4F9B;&#x4F4D;&#x7F6E;&#x5C5E;&#x6027;(&#x548C;&#x7EDF;&#x4E00;&#x4F4D;&#x7F6E;)&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x5728;&#x6E32;&#x67D3;&#x65F6;&#x624D;&#x63D0;&#x4F9B;&#x3002;</p><p>&#x63A5;&#x7740;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x521B;&#x5EFA;&#x4E00;&#x4E2A; buffer &#x6765;&#x7ED9;&#x5C5E;&#x6027;&#x63D0;&#x4F9B;&#x503C;&#x3002;</p><pre><code>var positionBuffer = gl.createBuffer();</code></pre>
<p>WebGL &#x80FD;&#x8BA9;&#x6211;&#x4EEC;&#x5728;&#x5168;&#x5C40;&#x7ED1;&#x5B9A;&#x70B9;&#x4E0A;&#xFF0C;&#x4F7F;&#x7528; WebGL &#x7684;&#x5927;&#x90E8;&#x5206;&#x8D44;&#x6E90;&#x3002;&#x4F60;&#x53EF;&#x4EE5;&#x8BA4;&#x4E3A;&#xFF0C;&#x7ED1;&#x5B9A;&#x70B9;&#x5728; WebGL &#x4E2D;&#xFF0C;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x4E2A;&#x5168;&#x5C40;&#x53D8;&#x91CF;&#x3002;&#x9996;&#x5148;&#xFF0C;&#x4F60;&#x7ED1;&#x5B9A;&#x4E00;&#x4E2A;&#x8D44;&#x6E90;&#x7ED9;&#x4E00;&#x4E2A;&#x70B9;&#x3002;&#x7136;&#x540E;&#xFF0C;&#x6D89;&#x53CA;&#x5230;&#x8BE5;&#x8D44;&#x6E90;&#x7684;&#x6240;&#x6709;&#x65B9;&#x6CD5;&#x90FD;&#x7ED1;&#x5B9A;&#x5230;&#x8FD9;&#x4E2A;&#x70B9;&#x4E0A;&#x4E86;&#x3002;&#x6240;&#x4EE5;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5148;&#x7ED1;&#x5B9A;&#x4E00;&#x4E2A;&#x4F4D;&#x7F6E; Buffer&#x3002;</p><pre><code>gl.bindBuffer(gl.ARRAY_BUFFER,positionBuffer);</code></pre>
<p>&#x73B0;&#x5728;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x628A;&#x6570;&#x636E;&#x653E;&#x5230; buffer &#x4E2D;&#x3002;&#x7136;&#x540E;&#xFF0C;&#x901A;&#x8FC7;&#x8FD9;&#x4E9B;&#x6570;&#x636E;&#x627E;&#x5230;&#x5177;&#x4F53;&#x7684;&#x7ED1;&#x5B9A;&#x70B9;&#x3002;</p><pre><code>// &#x4E09;&#x4E2A;&#x5E73;&#x9762;&#x70B9;&#x7684;&#x4F4D;&#x7F6E;
var positions = [
  0,0,
  0,0.5,
  0.7,0,
];
gl.bufferData(gl.ARRAY_BUFFER&#xFF0C;new Float32Array(positions)&#xFF0C;gl.STATIC_DRAW);</code></pre>
<p>There&apos;s a lot going on here. The first thing is we have positions which is a JavaScript array. WebGL on other hand needs strongly typed data so the part new Float32Array(positions) creates a new array of 32bit floating point numbers and copies the values from positions. gl.bufferData then copies that data to the positionBuffer on the GPU. It&apos;s using the position buffer because we bound it to the ARRAY_BUFFER bind point above.</p><p>&#x4E0A;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x770B;&#x8D77;&#x6765;&#x6709;&#x70B9;&#x590D;&#x6742;&#x3002;&#x9996;&#x5148;&#xFF0C;&#x6211;&#x4EEC;&#x4F7F;&#x7528; JavaScript &#x7684; Array &#x7ED3;&#x6784;&#xFF0C;&#x53BB;&#x5B9A;&#x4E49; <code>positions</code>&#x3002;&#x4F46;&#xFF0C;WebGL &#x9700;&#x8981;&#x7684;&#x662F;&#x5F3A;&#x7C7B;&#x578B;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x6240;&#x4EE5;&#xFF0C;<code>new Float32Array(positions)</code> &#x521B;&#x5EFA;&#x4E86;&#x4E00;&#x4E2A; 32&#x4F4D; &#x6D6E;&#x70B9;&#x6570;&#x7684;&#x6570;&#x7EC4;&#xFF0C;&#x5E76;&#x62F7;&#x8D1D; <code>poistions</code> &#x91CC;&#x7684;&#x6570;&#x636E;&#x3002;&#x7136;&#x540E;&#xFF0C;<code>gl.bufferData</code> &#x5C06;&#x62F7;&#x8D1D;&#x7684;&#x6570;&#x636E;&#x7ED9;&#x4E86;  <code>positionBuffer</code>&#x3002;&#x6211;&#x4EEC;&#x4E0A;&#x9762;&#x5DF2;&#x7ECF;&#x5C06; <code>positions</code> &#x548C; <code>ARRAY_BUFFER</code> &#x7ED1;&#x5B9A;&#x5728;&#x4E00;&#x8D77;&#xFF0C;&#x6240;&#x4EE5;&#xFF0C;<code>gl.bufferData</code> &#x53EF;&#x4EE5;&#x4F7F;&#x7528; position buffer&#x3002;</p><p>The last argument, gl.STATIC_DRAW is a hint to WebGL about how we&apos;ll use the data. WebGL can try to use that hint to optimize certain things. gl.STATIC_DRAW tells WebGL we are not likely to change this data much.</p><p>&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x53C2;&#x6570; <code>gl.STATIC_DRAW</code> &#x544A;&#x8BC9; WebGL &#xFF0C;&#x6211;&#x4EEC;&#x8FD9;&#x4E2A;&#x6570;&#x636E;&#x662F;&#x4F5C;&#x4EC0;&#x4E48;&#x7684;&#x3002;WebGL &#x80FD;&#x591F;&#x6839;&#x636E;&#x8FD9;&#x4E2A;&#x53C2;&#x6570;&#x53BB;&#x505A;&#x4E00;&#x4E9B;&#x4F18;&#x5316;&#x3002;<code>gl.STATIC_DRAW</code> &#x544A;&#x8BC9; WebGL &#x6309;&#x7167;&#x5E38;&#x91CF;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x6765;&#x5904;&#x7406;&#x8FD9;&#x6B21;&#x4F20;&#x5165;&#x7684;&#x6570;&#x636E;&#x3002;</p><p>Now that we&apos;ve put data in the a buffer we need to tell the attribute how to get data out of it. First off we need to turn the attribute on</p><p>&#x6211;&#x4EEC;&#x73B0;&#x5728;&#x5DF2;&#x7ECF;&#x628A;&#x6570;&#x636E;&#x653E;&#x5728; Buffer &#x91CC;&#xFF0C;&#x4F46;&#x6211;&#x4EEC;&#x8FD8;&#x9700;&#x8981;&#x544A;&#x8BC9;&#x5C5E;&#x6027;&#xFF0C;&#x600E;&#x4E48;&#x5C06;&#x6570;&#x636E;&#x4ECE; Buffer &#x4E2D;&#x53D6;&#x51FA;&#x6765;&#x3002;&#x9996;&#x5148;&#xFF0C;&#x9700;&#x8981;&#x542F;&#x7528;&#x5C5E;&#x6027;&#xFF08;attribute&#xFF09;&#x3002;</p><pre><code>gl.enableVertexAttribArray(positionAttributeLocation);</code></pre>
<p>&#x7136;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x5199;&#x4E00;&#x4E0B;&#x63D0;&#x53D6;&#x6570;&#x636E;&#x7684;&#x7A0B;&#x5E8F;&#x3002;</p><pre><code>var size = 2;          // &#x6BCF;&#x6B21;&#x8FED;&#x4EE3;&#x83B7;&#x53D6;2&#x4E2A;&#x6570;&#x636E;
var type = gl.FLOAT;   // &#x6570;&#x636E;&#x7684;&#x7C7B;&#x578B;&#x662F;32&#x4F4D;&#x7684;&#x6D6E;&#x70B9;&#x6570;
var normalize = false; // &#x4E0D;&#x9700;&#x8981;&#x683C;&#x5F0F;&#x5316;&#x6570;&#x636E;
var stride = 0;        // &#x6570;&#x636E;&#x4E0E;&#x6570;&#x636E;&#x4E4B;&#x95F4;&#x7684;&#x95F4;&#x9694;&#x662F;0&#x3002;&#x95F4;&#x9694;&#x8BA1;&#x7B97;&#x5C31;&#x662F; size * sizeof(type)
var offset = 0;        // &#x6709;&#x6548;&#x6570;&#x636E;&#x5728; buffer &#x4E2D;&#x5F00;&#x59CB;&#x7684;&#x4F4D;&#x7F6E;
gl.vertexAttribPointer(
    positionAttributeLocation&#xFF0C;size&#xFF0C;type&#xFF0C;normalize&#xFF0C;stride&#xFF0C;offset)</code></pre>
<p>A hidden part of gl.vertexAttribPointer is that it binds the current ARRAY_BUFFER to the attribute. In other words now this attribute is bound to positionBuffer. That means we&apos;re free to bind something else to the ARRAY_BUFFER bind point. The attribute will continue to use positionBuffer.</p><p>gl.vertexAttribPointer &#x5728;&#x5185;&#x90E8;&#x5C06; <code>ARRAY_BUFFER</code> &#x7ED1;&#x5B9A;&#x7ED9;&#x4E86;&#x5C5E;&#x6027;&#x503C;&#x3002;&#x6362;&#x53E5;&#x8BDD;&#x5C31;&#x662F;&#xFF0C;&#x8FD9;&#x4E2A;&#x5C5E;&#x6027;&#xFF08;attribute&#xFF09;&#x548C; <code>positionBuffer</code> &#x7ED1;&#x5B9A;&#x5728;&#x4E00;&#x8D77;&#x3002;&#x8FD9;&#x6837;&#xFF0C;&#x6211;&#x4EEC;&#x4E5F;&#x4E0D;&#x9700;&#x8981;&#x989D;&#x5916;&#x7ED9; <code>ARRAY_BUFFER</code> &#x518D;&#x7ED1;&#x5B9A;&#x4EC0;&#x4E48;&#x4E86;&#x3002;&#x8FD9;&#x4E2A;&#x5C5E;&#x6027;&#x4F1A;&#x76F4;&#x63A5;&#x4F7F;&#x7528; <code>positionBuffer</code> &#x91CC;&#x7684;&#x6570;&#x636E;&#x3002;</p><p>&#x6CE8;&#x610F;&#xFF0C;&#x6211;&#x4EEC;&#x5728;&#x4E0A;&#x9762;&#x5199;&#x7684; GLSL &#x9876;&#x70B9;&#x7740;&#x8272;&#x5668;&#x3002;<code>a_position</code> &#x5C5E;&#x6027;&#x662F;&#x4E00;&#x4E2A; vec4 &#x7C7B;&#x578B;&#x3002;</p><pre><code>attribute vec4 a_position;</code></pre>
<p>vec4 is a 4 float value. In JavaScript you could think of it something like a_position = {x: 0, y: 0, z: 0, w: 0}. Above we set size = 2. Attributes default to 0, 0, 0, 1 so this attribute will get its first 2 values (x and y) from our buffer. The z, and w will be the default 0 and 1 respectively.</p><p><code>vec4</code> &#x662F;&#x4E00;&#x4E2A; 4 &#x5355;&#x4F4D;&#x7684;&#x6D6E;&#x70B9;&#x503C;&#x3002;&#x5728; JavaScript &#x91CC;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x8BA4;&#x4E3A;&#x4ED6;&#x7684;&#x5F62;&#x5F0F;&#x5982;&#x540C; <code>a_position = {x: 0&#xFF0C;y: 0&#xFF0C;z: 0&#xFF0C;w: 1}</code>&#x3002;&#x4E0A;&#x9762;&#xFF0C;&#x6211;&#x4EEC;&#x5C06; <code>size = 2</code>&#x3002;&#x56E0;&#x4E3A;&#xFF0C;&#x5C5E;&#x6027;&#x503C;&#x9ED8;&#x8BA4;&#x4E3A; 0&#xFF0C;0&#xFF0C;0&#xFF0C;1 &#xFF0C;&#x6240;&#x4EE5;&#x8BE5;&#x5C5E;&#x6027;&#x4F1A;&#x4ECE;&#x6211;&#x4EEC;&#x7684; buffer &#x4E2D;&#xFF0C;&#x5F97;&#x5230; <code>a_position</code> &#x7684;&#x524D;&#x4E24;&#x4E2A;&#x503C;&#xFF08;x &#x548C; y&#xFF09;&#x3002;&#x800C; z &#x548C; w &#x9ED8;&#x8BA4;&#x4E3A; 0 &#x548C; 1&#x3002;</p><p>Before we draw we should resize the canvas to match it&apos;s display size. Canvases just like Images have 2 sizes. The number of pixels actually in them and separately the size they are displayed. CSS determines the size the canvas is displayed. You should always set the size you want a canvas with CSS since it is far far more flexible than any other method.</p><p>&#x5728;&#x7ED8;&#x5236;&#x4E4B;&#x524D;&#xFF0C;&#x6211;&#x4EEC;&#x5E94;&#x8BE5;&#x6539;&#x53D8; canvas &#x7684;&#x5927;&#x5C0F;&#x53BB;&#x6EE1;&#x8DB3;&#x9700;&#x8981;&#x663E;&#x793A;&#x7684;&#x5927;&#x5C0F;&#x3002;Canvases &#x548C; &#x56FE;&#x7247;&#x4E00;&#x6837;&#x6709;&#x957F;&#xFF0C;&#x5BBD;&#x4E24;&#x4E2A;&#x5927;&#x5C0F;&#x503C;&#x3002;CSS &#x53EF;&#x4EE5;&#x8BBE;&#x7F6E; canvas &#x663E;&#x793A;&#x7684;&#x5927;&#x5C0F;&#x3002;<strong>&#x4F60;&#x5E94;&#x8BE5;&#x4F7F;&#x7528; CSS &#x5C06; canvas &#x8BBE;&#x4E3A;&#x4F60;&#x60F3;&#x8981;&#x7684;&#x5927;&#x5C0F;</strong>&#xFF0C;&#x56E0;&#x4E3A; CSS &#x76F8;&#x6BD4;&#x4E8E;&#x5176;&#x4ED6;&#x65B9;&#x6CD5;&#x800C;&#x8A00;&#x66F4;&#x7075;&#x6D3B;&#x3002;</p><p>To make the number of pixels in the canvas match the size it&apos;s displayed I&apos;m using a helper function you can read about here.</p><p>&#x8BA9; canvas &#x91CC;&#x7684;&#x50CF;&#x7D20;&#x91CF;&#x80FD;&#x521A;&#x597D;&#x5408;&#x9002;&#x4ED6;&#x5C55;&#x793A;&#x7684;&#x5927;&#x5C0F;&#x3002;&#x6211;&#x4F7F;&#x7528;&#x4E00;&#x4E2A;<a href="http://webglfundamentals.org/webgl/lessons/webgl-resizing-the-canvas.html" target="_blank">&#x8F85;&#x52A9;&#x51FD;&#x6570;</a>&#x3002;</p><p>In nearly all of these samples the canvas size is 400x300 pixels if the sample is run in its own window but stretches to fill the available space if it&apos;s in side an iframe like it is on this page. By letting CSS determine the size and then adjusting to match we easily handle both of these cases.</p><p>&#x51E0;&#x4E4E;&#x6240;&#x6709;&#x4F8B;&#x5B50;&#x4E2D; canvas &#x7684;&#x5927;&#x5C0F;&#x90FD;&#x662F; 400x300,&#x5373;&#x4F7F;&#x8BE5;&#x4F8B;&#x5B50;&#x9700;&#x8981;&#x5728;&#x4ED6;&#x81EA;&#x5DF1;&#x7684; window &#x91CC;&#x9762;&#x8FD0;&#x884C;&#x800C;&#x4E14;&#x9700;&#x8981;&#x62C9;&#x4F38;&#x53BB;&#x586B;&#x5145;&#x53EF;&#x7528;&#x7684;&#x7A7A;&#x95F4;&#xFF0C;&#x5373;&#x4F7F;&#x50CF;&#x8BE5;&#x9875;&#x9762;&#x4E00;&#x6837;&#xFF0C;&#x4ED6;&#x662F;&#x5728;&#x4E00;&#x4E2A; iframe &#x4E2D;&#x3002;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x901A;&#x8FC7; CSS &#x8BBE;&#x7F6E; canvas &#x7684;&#x5927;&#x5C0F;&#xFF0C;&#x7136;&#x540E;&#x8C03;&#x6574;&#x5230;&#x5408;&#x9002;&#x7684;&#x8303;&#x56F4;&#x3002;</p><pre><code>webglUtils.resizeCanvasToDisplaySize(gl.canvas);</code></pre>
<p>We need to tell WebGL how to convert from the clip space values we&apos;ll be setting gl_Position to back into pixels, often called screen space. To do this we call gl.viewport and pass it the current size of the canvas.</p><p>&#x53E6;&#x5916;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x544A;&#x8BC9; WebGL&#xFF0C;&#x600E;&#x6837;&#x5C06; <code>gl_Position</code> &#x8BBE;&#x7F6E;&#x7684;&#x88C1;&#x526A;&#x7A7A;&#x95F4;(&#x4E09;&#x7EF4;&#x5750;&#x6807;)&#x7684;&#x503C;&#xFF0C;&#x8F6C;&#x6362;&#x4E3A;&#x5E73;&#x9762;&#x7A7A;&#x95F4;(&#x4E8C;&#x7EF4;&#x5750;&#x6807;)&#x7684;&#x503C;&#x3002;&#x8FD9;&#x91CC;&#xFF0C;&#x6211;&#x4EEC;&#x4F7F;&#x7528; <code>gl.viewport</code> &#x5E76;&#x4E14;&#x83B7;&#x5F97; canvas &#x7684;&#x5927;&#x5C0F;&#x3002;</p><pre><code>gl.viewport(0&#xFF0C;0&#xFF0C;gl.canvas.width&#xFF0C;gl.canvas.height);</code></pre>
<p>This tells WebGL the -1 +1 clip space maps to 0 -&gt; gl.canvas.width for x and 0 -&gt; gl.canvas.height for y.</p><p>&#x8FD9;&#x91CC;&#x544A;&#x8BC9; WebGL &#x5C06; -1 +1 &#x7684;&#x88C1;&#x526A;&#x5750;&#x6807;&#x5206;&#x522B;&#x8FDB;&#x884C;&#x6620;&#x5C04;&#xFF0C; 0 -&gt; gl.canvas.width &#x4E3A; x&#xFF0C;0 -&gt; gl.canvas.height &#x4E3A; y&#x3002;</p><p>We clear the canvas. 0, 0, 0, 0 are r, g, b, alpha so in this case we&apos;re making the canvas transparent.</p><p>&#x6211;&#x4EEC;&#x5148;&#x6E05;&#x7A7A; canvas&#x3002;&#x56E0;&#x4E3A; 0&#xFF0C;0&#xFF0C;0&#xFF0C;0 &#x5206;&#x522B;&#x662F; r&#xFF0C;g&#xFF0C;b&#xFF0C;alpha&#x3002;&#x6240;&#x4EE5;&#xFF0C;&#x6211;&#x4EEC;&#x5B9E;&#x9645;&#x4E0A;&#x5C06; canvas &#x53D8;&#x900F;&#x660E;&#x4E86;&#x3002;</p><pre><code>// &#x6E05;&#x7A7A; canvas
gl.clearColor(0, 0, 0, 0);
gl.clear(gl.COLOR_BUFFER_BIT);</code></pre>
<p>Finally we need to tell WebGL which shader program to execute.</p><p>&#x6700;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x544A;&#x8BC9; WebGL &#x53BB;&#x8C03;&#x7528;&#x54EA;&#x4E00;&#x4E2A; shader&#x3002;</p><pre><code>// &#x544A;&#x8BC9; WebGL &#x53BB;&#x8C03;&#x7528;&#x6211;&#x4EEC;&#x7684;&#x7A0B;&#x5E8F;&#xFF08;&#x6210;&#x5BF9;&#x7684;&#x7740;&#x8272;&#x5668;&#xFF09;
gl.useProgram(program);</code></pre>
<p>After all that we can finally ask WebGL to execute our GLSL program.</p><p>&#x4E4B;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x8BA9; WebGL &#x53BB;&#x6267;&#x884C;&#x6211;&#x4EEC;&#x7684; GLSL &#x7A0B;&#x5E8F;&#x4E86;&#x3002;</p><pre><code>var primitiveType = gl.TRIANGLES;
var offset = 0;
var count = 3;
gl.drawArrays(primitiveType&#xFF0C;offset&#xFF0C;count);</code></pre>
<p>Because the count is 3 this will execute our vertex shader 3 times. The first time a_position.x and a_position.y in our vertex shader attribute will be set to the first 2 values from the positionBuffer. The 2nd time a_position.xy will be set to the 2nd two values. The last time it will be set to the last 2 values.</p><p>&#x56E0;&#x4E3A; <code>count</code> &#x7684;&#x503C;&#x662F; 3&#xFF0C;&#x4EE3;&#x8868;&#x7740; WebGL &#x4F1A;&#x6267;&#x884C;&#x9876;&#x70B9;&#x7740;&#x8272;&#x5668; 3 &#x6B21;&#x3002;&#x7B2C;&#x4E00;&#x6B21;&#xFF0C;<code>a_position.x</code> &#x548C; <code>a_position.y</code> &#x88AB;&#x8BBE;&#x7F6E;&#x4E3A;&#x4E0A;&#x9762;&#x63D0;&#x4F9B;&#x7684; <code>positionBuffer</code> &#x7684;&#x524D;&#x4E24;&#x4E2A;&#x503C;&#x3002;&#x7B2C;&#x4E8C;&#x6B21;&#xFF0C;&#x5219;&#x662F;&#x63A5;&#x4E0B;&#x6765;&#x7684;&#x4E24;&#x4E2A;&#x503C;&#x3002;&#x7B2C;&#x4E09;&#x6B21;&#xFF0C;&#x5C31;&#x662F;&#x6700;&#x540E;&#x4E24;&#x4E2A;&#x503C;&#x3002;</p><p>Because we set primitiveType to gl.TRIANGLES, each time our vertex shader is run 3 times WebGL will draw a triangle based on the 3 values we set gl_Position to. No matter what size our canvas is those values are in clip space coordinates that go from -1 to 1 in each direction.</p><p>&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x4E00;&#x5F00;&#x59CB;&#x8BBE;&#x7F6E;&#x7684; <code>primitiveType</code> &#x662F; <code>gl.TRIANGLES</code>&#xFF0C;&#x6240;&#x4EE5;&#xFF0C;&#x6BCF;&#x6B21;&#x6211;&#x4EEC;&#x7684;&#x9876;&#x70B9;&#x7740;&#x8272;&#x5668;&#x4F1A;&#x88AB;&#x8C03;&#x7528; 3 &#x6B21;&#xFF0C;&#x7136;&#x540E;&#xFF0C;WebGL &#x4F1A;&#x6839;&#x636E;&#x6211;&#x4EEC;&#x63D0;&#x4F9B;&#x7ED9; <code>gl_Position</code> &#x7684;&#x4E09;&#x4E2A;&#x503C;&#x753B;&#x4E00;&#x4E2A;&#x4E09;&#x89D2;&#x5F62;&#x3002;&#x4E0D;&#x7BA1; canvas &#x6709;&#x591A;&#x5927;&#xFF0C;&#x53EA;&#x8981;&#x6620;&#x5C04;&#x5230;&#x88C1;&#x526A;&#x7A7A;&#x95F4;&#x7684;&#x503C;&#x5728; -1 &#x548C; 1 &#x4E4B;&#x95F4;&#xFF0C;&#x5C31;&#x6CA1;&#x95EE;&#x9898;&#x3002;</p><p>&#x56E0;&#x4E3A;&#x9876;&#x70B9;&#x7740;&#x8272;&#x5668;&#x53EA;&#x662F;&#x7B80;&#x5355;&#x7684;&#x5C06; positionBuffer &#x7684;&#x503C;&#x8D4B;&#x7ED9;&#x4E86; <code>gl_Position</code>&#x3002;&#x6240;&#x4EE5;&#xFF0C;&#x8FD9;&#x4E2A;&#x4E09;&#x89D2;&#x5F62;&#x4F1A;&#x5F88;&#x76F4;&#x63A5;&#x7ED8;&#x5236;&#x5230;&#x88C1;&#x526A;&#x7684;&#x5750;&#x6807;&#x7CFB;&#x4E0A;&#x3002;</p><pre><code>  0&#xFF0C;0&#xFF0C;
  0&#xFF0C;0.5&#xFF0C;
  0.7&#xFF0C;0&#xFF0C;</code></pre>
<p>Converting from clip space to screen space WebGL is going to draw a triangle at. If the canvas size happned to be 400x300 we&apos;d get something like this</p><p>&#x5F53;&#x5750;&#x6807;&#x503C;&#x4ECE;&#x88C1;&#x526A;&#x5750;&#x6807;&#x8F6C;&#x6362;&#x5230;&#x5E73;&#x9762;&#x5750;&#x6807;&#x4E2D;&#xFF0C;WebGL &#x4F1A;&#x5728;&#x5176;&#x4E2D;&#x753B;&#x4E00;&#x4E2A;&#x4E09;&#x89D2;&#x5F62;&#x3002;&#x5982;&#x679C; canvas &#x7684;&#x5927;&#x5C0F;&#x662F; 400x300&#xFF0C;&#x6211;&#x4EEC;&#x4F1A;&#x5F97;&#x5230;&#x4E0B;&#x9762;&#x7684;&#x7ED3;&#x679C;&#x3002;</p><pre><code> clip space      screen space
   0&#xFF0C;0       -&gt;   200&#xFF0C;150
   0&#xFF0C;0.5     -&gt;   200&#xFF0C;225
 0.7&#xFF0C;0       -&gt;   340&#xFF0C;150</code></pre>
<p>WebGL will now render that triangle. For every pixel it is about to draw WebGL will call our fragment shader. Our fragment shader just sets gl_FragColor to 1, 0, 0.5, 1. Since the Canvas is an 8bit per channel canvas that means WebGL is going to write the values [255, 0, 127, 255] into the canvas.</p><p>WebGL &#x63A5;&#x7740;&#x5F00;&#x59CB;&#x6E32;&#x67D3;&#x4E09;&#x89D2;&#x5F62;&#x3002;&#x5B83;&#x4F1A;&#x8C03;&#x7528;&#x7247;&#x5143;&#x7740;&#x8272;&#x5668;&#x53BB;&#x6E32;&#x67D3;&#x6BCF;&#x4E00;&#x4E2A;&#x5C0F;&#x82CF;&#x7684;&#x989C;&#x8272;&#x3002;&#x6211;&#x4EEC;&#x7247;&#x5143;&#x7740;&#x8272;&#x5668;&#x8BBE;&#x7F6E;&#x7684;&#x503C;&#x4E3A; <code>1&#xFF0C;0&#xFF0C;0.5&#xFF0C;1</code>&#x3002;&#x56E0;&#x4E3A;&#xFF0C;canvas &#x662F; 8bit &#x901A;&#x9053;&#xFF0C;WebGL &#x6700;&#x540E;&#x6E32;&#x67D3;&#x7684;&#x989C;&#x8272;&#x503C;&#x5C31;&#x662F; <code>[255&#xFF0C;0&#xFF0C;127&#xFF0C;255]</code>.</p><p>&#x770B;&#x4E2A;&#x5177;&#x4F53;&#x7684;&#x4F8B;&#x5B50;:</p><p><img src="http://static.zybuluo.com/jimmythr/ojqdq6nck0hj9nwjmtg9yknn/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202016-09-21%2021.45.39.png"></p><p><a href="http://webglfundamentals.org/webgl/webgl-fundamentals.html" target="_blank">&#x67E5;&#x770B;&#x5177;&#x4F53;&#x7684;&#x7F51;&#x9875;</a></p><p>In the case above you can see our vertex shader is doing nothing but passing on our position data directly. Since the position data is already in clipspace there is no work to do. If you want 3D it&apos;s up to you to supply shaders that convert from 3D to clipspace because WebGL is only a rasterization API.</p><p>&#x4E0A;&#x9762;&#x7684;&#x4F8B;&#x5B50;&#x4E2D;&#xFF0C;&#x56E0;&#x4E3A;&#x4F4D;&#x7F6E;&#x6570;&#x636E;&#x5DF2;&#x7ECF;&#x5728;&#x88C1;&#x526A;&#x5750;&#x6807;&#x4E2D;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x505A;&#x989D;&#x5916;&#x7684;&#x8F6C;&#x6362;&#xFF0C;&#x6240;&#x4EE5;&#xFF0C;&#x9876;&#x70B9;&#x7740;&#x8272;&#x5668;&#x53EA;&#x662F;&#x5E2E;&#x6211;&#x4EEC;&#x4F20;&#x9012;&#x4E86;&#x4F4D;&#x7F6E;&#x6570;&#x636E;&#x800C;&#x5DF2;&#x3002;&#x5982;&#x679C;&#x4F60;&#x60F3;&#x8981;3D&#x7684;&#x6548;&#x679C;&#xFF0C;&#x90A3;&#x4E48;&#x4F60;&#x9700;&#x8981;&#x63D0;&#x4F9B;&#x4E00;&#x4E2A;&#x7740;&#x8272;&#x5668;&#xFF0C;&#x53EF;&#x4EE5;&#x5C06; 3D &#x5750;&#x6807;&#x8F6C;&#x6362;&#x4E3A; &#x88C1;&#x526A;&#x7A7A;&#x95F4;&#x7684;&#x4F4D;&#x7F6E;&#xFF0C;&#x800C;&#x8FD9;&#x548C; WebGL &#x6CA1;&#x6709;&#x592A;&#x5927;&#x7684;&#x5173;&#x7CFB;&#xFF0C;&#x56E0;&#x4E3A; WebGL &#x53EA;&#x662F;&#x4E00;&#x4E2A;&#x6805;&#x683C;&#x5316;&#x7684; API&#x3002;</p><p>You might be wondering why does the triangle start in the middle and go to toward the top right. Clip space in x goes from -1 to +1. That means 0 is in the center and positive values will be to the right of that.</p><p>&#x4F60;&#x53EF;&#x80FD;&#x4F1A;&#x7591;&#x60D1;&#xFF0C;&#x4E3A;&#x4EC0;&#x4E48;&#x8FD9;&#x4E2A;&#x4E09;&#x89D2;&#x5F62;&#x4ECE;&#x4E2D;&#x70B9;&#x5F00;&#x59CB;&#x7136;&#x540E;&#x671D;&#x5411;&#x53F3;&#x4E0A;&#x65B9;&#x3002;&#x6211;&#x4EEC;&#x6765;&#x5206;&#x6790;&#x4E00;&#x4E0B;&#x3002;x &#x8F74;&#x7684;&#x8303;&#x56F4;&#x662F; -1 &#x5230; 1&#x3002;&#x96F6;&#x70B9;&#x5728;&#x4E2D;&#x5FC3;&#x5E76;&#x4E14;&#x5411;&#x53F3;&#x503C;&#x589E;&#x5927;&#x3002;</p><p>&#x5BF9;&#x4E8E;&#x7EB5;&#x5750;&#x6807;&#x800C;&#x8A00;&#xFF0C;-1 &#x5C31;&#x662F;&#x5E95;&#x90E8;&#xFF0C;1 &#x5C31;&#x662F;&#x9876;&#x90E8;&#x3002;&#x96F6;&#x70B9;&#x5728;&#x4E2D;&#x5FC3;&#xFF0C;&#x5411;&#x4E0A;&#x503C;&#x589E;&#x5927;&#x3002;</p><p>For 2D stuff you would probably rather work in pixels than clipspace so let&apos;s change the shader so we can supply the position in pixels and have it convert to clipspace for us. Here&apos;s the new vertex shader</p><p>&#x5BF9;&#x4E8E; 2D &#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#xFF0C;&#x4F60;&#x5B8C;&#x5168;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x50CF;&#x7D20;&#x5355;&#x4F4D;&#x6765;&#x4EE3;&#x66FF;&#x88C1;&#x526A;&#x5355;&#x4F4D;&#x3002;&#x8FD9;&#x6837;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x9700;&#x8981;&#x6362;&#x4E00;&#x79CD;&#x65B9;&#x5F0F;&#x5199; &#x7740;&#x8272;&#x5668;&#x3002;&#x7136;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x63D0;&#x4F9B;&#x50CF;&#x7D20;&#x5355;&#x4F4D;&#xFF0C;&#x5E76;&#x4E14;&#x5C06;&#x50CF;&#x7D20;&#x5355;&#x4F4D;&#x8F6C;&#x6362;&#x4E3A;&#x88C1;&#x526A;&#x5355;&#x4F4D;&#x3002;
&#x4E0B;&#x9762;&#x662F;&#x4E00;&#x79CD;&#x65B0;&#x7684;&#x9876;&#x70B9;&#x7740;&#x8272;&#x5668;&#xFF1A;</p><pre><code>&lt;script id=&quot;2d-vertex-shader&quot; type=&quot;notjs&quot;&gt;

  // &#x79FB;&#x9664; attribute vec4 a_position;
  attribute vec2 a_position;

  uniform vec2 u_resolution;

  void main() {
    // &#x5C06;&#x50CF;&#x7D20;&#x5355;&#x4F4D;&#x6620;&#x5C04;&#x5230; 0 &#x548C; 1 &#x4E4B;&#x95F4;
    vec2 zeroToOne = a_position / u_resolution;

    // &#x5C06;0&#x5230;1&#x7684;&#x6620;&#x5C04;&#xFF0C;&#x53D8;&#x4E3A;0&#x5230;2&#x7684;&#x6620;&#x5C04;
    vec2 zeroToTwo = zeroToOne * 2.0;

    // &#x5C06;0&#x5230;2&#x7684;&#x6620;&#x5C04;&#xFF0C;&#x91CD;&#x65B0;&#x53D8;&#x4E3A;-1&#x5230;1&#x7684;&#x6620;&#x5C04;(&#x539F;&#x6765;&#x7684;&#x88C1;&#x526A;&#x5750;&#x6807;)
    vec2 clipSpace = zeroToTwo - 1.0;

    gl_Position = vec4(clipSpace&#xFF0C;0&#xFF0C;1);
  }

&lt;/script&gt;</code></pre>
<p>Some things to notice about the changes. We changed a_position to a vec2 since we&apos;re only using x and y anyway. A vec2 is similar to a vec4 but only has x and y.</p><p>&#x4E0A;&#x9762;&#xFF0C;&#x6211;&#x4EEC;&#x5C06; <code>a_position</code> &#x6539;&#x4E3A; <code>vec2</code> &#x7C7B;&#x578B;&#x3002;vec2 &#x548C; vec4 &#x95F4;&#x7684;&#x533A;&#x522B;&#x5728;&#x4E8E;&#xFF0C;vec2 &#x53EA;&#x6709; x&#xFF0C;y &#x4E24;&#x4E2A;&#x5750;&#x6807;&#x3002;</p><p>Next we added a uniform called u_resolution. To set that we need to look up its location.</p><p>&#x63A5;&#x7740;&#xFF0C;&#x6211;&#x4EEC;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A; <code>uniform</code> --&gt; <code>u_resolution</code>&#x3002;&#x4E0D;&#x8FC7;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x89E3;&#x6790;&#x5B83;&#x7684;&#x4F4D;&#x7F6E;&#x3002;</p><pre><code>var resolutionUniformLocation = gl.getUniformLocation(program&#xFF0C;&quot;u_resolution&quot;);</code></pre>
<p>The rest should be clear from the comments. By setting u_resolution to the resolution of our canvas the shader will now take the positions we put in positionBuffer supplied in pixels coordinates and convert them to clip space.</p><p>&#x5269;&#x4E0B;&#x7684;&#x90E8;&#x5206;&#xFF0C;&#x6211;&#x4EEC;&#x4ECE;&#x6CE8;&#x91CA;&#x4E2D;&#x5E94;&#x8BE5;&#x80FD;&#x5927;&#x81F4;&#x770B;&#x61C2;&#x3002;&#x901A;&#x8FC7; <code>u_resolution</code> &#x83B7;&#x53D6;&#x5230; canvas &#x7684;&#x5206;&#x8FA8;&#x7387;&#x4E4B;&#x540E;&#xFF0C;&#x7740;&#x8272;&#x5668;&#x5C31;&#x4F1A;&#x76F4;&#x63A5;&#x4ECE;&#x6211;&#x4EEC;&#x63D0;&#x4F9B;&#x7684; <code>positionBuffer</code> &#x91CC;&#x9762;&#x83B7;&#x53D6;&#x7684;&#x50CF;&#x7D20;&#x5750;&#x6807;&#xFF0C;&#x5E76;&#x628A;&#x5B83;&#x4EEC;&#x8F6C;&#x6362;&#x4F4D;&#x88C1;&#x526A;&#x5750;&#x6807;&#x3002;</p><p>&#x73B0;&#x5728;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x50CF;&#x7D20;&#x503C;&#x4E86;&#x3002;&#x63A5;&#x4E0B;&#x6765;&#xFF0C;&#x6211;&#x4EEC;&#x6765;&#x4E00;&#x4E2A;&#x77E9;&#x5F62;&#x3002;&#x8BE5;&#x77E9;&#x5F62;&#x6709;&#x4E24;&#x4E2A;&#x4E09;&#x89D2;&#x5F62;&#xFF0C;&#x516D;&#x4E2A;&#x70B9;&#x7EC4;&#x6210;&#x3002;</p><pre><code>var positions = [
  10&#xFF0C;20&#xFF0C;
  80&#xFF0C;20&#xFF0C;
  10&#xFF0C;30&#xFF0C;
  10&#xFF0C;30&#xFF0C;
  80&#xFF0C;20&#xFF0C;
  80&#xFF0C;30&#xFF0C;
];
gl.bufferData(gl.ARRAY_BUFFER&#xFF0C;new Float32Array(positions)&#xFF0C;gl.STATIC_DRAW);</code></pre>
<p>And after we set which program to use we can set the value for the uniform we created. Use program is like gl.bindBuffer above in that it sets the current program. After that all the gl.uniformXXX functions set uniforms on the current program.</p><p>&#x5F53;&#x6211;&#x4EEC;&#x8BBE;&#x7F6E;&#x4E86;&#x9700;&#x8981;&#x8C03;&#x7528;&#x7684;&#x7A0B;&#x5E8F;&#x4E4B;&#x540E;&#xFF0C;&#x5C31;&#x9700;&#x8981;&#x7ED9; uniform &#x8D4B;&#x503C;&#x4E86;&#x3002;&#x548C; <code>gl.bindBuffer</code> &#x65B9;&#x6CD5;&#x7C7B;&#x4F3C;&#xFF0C;&#x6211;&#x4EEC;&#x4F7F;&#x7528; <code>gl.uniformXXX</code> &#x65B9;&#x6CD5;&#x7ED9;&#x5F53;&#x524D;&#x7A0B;&#x5E8F;&#x4E2D; uniform &#x8D4B;&#x503C;&#x3002;</p><pre><code>gl.useProgram(program);

// &#x8BBE;&#x7F6E;&#x5206;&#x8FA8;&#x7387;
gl.uniform2f(resolutionUniformLocation&#xFF0C;gl.canvas.width&#xFF0C;gl.canvas.height);</code></pre>
<p>&#x4E3A;&#x4E86;&#x753B;&#x4E24;&#x4E2A;&#x4E09;&#x89D2;&#x5F62;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x8C03;&#x7528;&#x9876;&#x70B9;&#x7740;&#x8272;&#x5668;6&#x6B21;&#xFF0C;&#x6240;&#x4EE5;&#xFF0C;&#x4E0B;&#x9762;&#x7684; count &#x9700;&#x8981;&#x8BBE;&#x7F6E;&#x4E3A; 6&#x3002;</p><pre><code>var primitiveType = gl.TRIANGLES;
var offset = 0;
var count = 6;
gl.drawArrays(primitiveType&#xFF0C;offset&#xFF0C;count);</code></pre>
<p>&#x7ED3;&#x679C;&#x5982;&#x56FE;:</p><p><img src="http://static.zybuluo.com/jimmythr/55um2fx97pm80c0kfoaxcs9p/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202016-09-22%2022.20.56.png"></p><p><a href="http://webglfundamentals.org/webgl/webgl-2d-rectangle-top-left.html" target="_blank">&#x67E5;&#x770B;&#x5177;&#x4F53;&#x7684;&#x7F51;&#x9875;</a></p><p>Again you might notice the rectangle is near the bottom of that area. WebGL considers the bottom left corner to be 0,0. To get it to be the more traditional top left corner used for 2d graphics APIs we can just flip the clip space y coordinate.</p><p>&#x53E6;&#x5916;&#xFF0C;&#x4F60;&#x53EF;&#x80FD;&#x4F1A;&#x6CE8;&#x610F;&#x5230;&#xFF0C;&#x77E9;&#x5F62;&#x73B0;&#x5728;&#x4F4D;&#x4E8E;&#x753B;&#x5E03;&#x7684;&#x5730;&#x6B65;&#x3002;WebGL &#x4F1A;&#x5C06; &#x5DE6;&#x4E0B;&#x89D2;&#x4F5C;&#x4E3A; 0&#xFF0C;0 &#x70B9;&#x3002;&#x4E3A;&#x4E86;&#x8BA9;&#x5B83;&#x548C;&#x4F20;&#x7EDF; 2d &#x56FE;&#x50CF; APIs&#x53C2;&#x8003;&#x7684;&#x5DE6;&#x4E0A;&#x65B9;&#x539F;&#x70B9;&#x7EDF;&#x4E00;&#xFF0C;&#x6211;&#x4EEC;&#x5C06; y &#x5750;&#x6807;&#x503C;&#x5750;&#x4E00;&#x6B21;&#x53CD;&#x8F6C;&#x3002;</p><pre><code>gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);</code></pre>
<p>And now our rectangle is where we expect it.</p><p>&#x73B0;&#x5728;&#xFF0C;&#x77E9;&#x5F62;&#x548C;&#x6211;&#x4EEC;&#x5E73;&#x5E38;&#x89C1;&#x5230;&#x7684;&#x4E00;&#x6837;&#x4E86;&#x3002;</p><p><img src="http://static.zybuluo.com/jimmythr/r0ndu8iohe37o219mxm4cvgj/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202016-09-30%2020.57.26.png"></p><p><a href="http://webglfundamentals.org/webgl/webgl-2d-rectangle-top-left.html" target="_blank">&#x67E5;&#x770B;&#x5177;&#x4F53;&#x7684;&#x7F51;&#x9875;</a></p><p>Let&apos;s make the code that defines a rectangle into a function so we can call it for different sized rectangles. While we&apos;re at it we&apos;ll make the color settable.</p><p>&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5C06;&#x753B;&#x77E9;&#x5F62;&#x7684;&#x4EE3;&#x7801;&#x5199;&#x4E3A;&#x51FD;&#x6570;&#xFF0C;&#x8FD9;&#x6837;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x80FD;&#x5F88;&#x5FEB;&#x7684;&#x753B;&#x51FA;&#x4E0D;&#x540C;&#x5927;&#x5C0F;&#x7684;&#x77E9;&#x5F62;&#x3002;&#x4E0D;&#x8FC7;&#xFF0C;&#x5728;&#x6211;&#x4EEC;&#x505A;&#x4E4B;&#x524D;&#xFF0C;&#x9700;&#x8981;&#x786E;&#x5B9A;&#x4E00;&#x4E0B;&#x989C;&#x8272;&#x3002;</p><pre><code>&lt;script id=&quot;2d-fragment-shader&quot; type=&quot;notjs&quot;&gt;
  precision mediump float;

  uniform vec4 u_color;

  void main() {
    gl_FragColor = u_color;
  }
&lt;/script&gt;</code></pre>
<p>&#x4E0B;&#x9762;&#xFF0C;&#x6211;&#x4EEC;&#x6765;&#x5B9E;&#x8DF5;&#x4E00;&#x4E0B;&#xFF0C;&#x753B;&#x51FA;50&#x4E2A;&#x4E0D;&#x540C;&#x989C;&#x8272;&#xFF0C;&#x4E0D;&#x540C;&#x4F4D;&#x7F6E;&#x7684;&#x77E9;&#x5F62;&#x3002;</p><pre><code>  var colorLocation = gl.getUniformLocation(program&#xFF0C;&quot;u_color&quot;);
  ...

  // &#x8BBE;&#x7F6E;&#x77E9;&#x5F62;&#x7684;&#x968F;&#x673A;&#x4F4D;&#x7F6E;
  for (var ii = 0; ii &lt; 50; ++ii) {
    // Setup a random rectangle
    setRectangle(
        gl&#xFF0C;randomInt(300)&#xFF0C;randomInt(300)&#xFF0C;randomInt(300)&#xFF0C;randomInt(300));

    // &#x8BBE;&#x7F6E;&#x968F;&#x673A;&#x7684;&#x989C;&#x8272;
    gl.uniform4f(colorLocation&#xFF0C;Math.random()&#xFF0C;Math.random()&#xFF0C;Math.random()&#xFF0C;1);

    // &#x753B;&#x77E9;&#x5F62;
    gl.drawArrays(gl.TRIANGLES&#xFF0C;0&#xFF0C;6);
  }
}

// Returns a random integer from 0 to range - 1.
// &#x8FD4;&#x56DE; 0&#x5230; &#xFF08;range-1&#xFF09;&#x4E4B;&#x95F4;&#x7684;&#x6574;&#x6570;
function randomInt(range) {
  return Math.floor(Math.random() * range);
}

// &#x5C01;&#x88C5;&#x597D;&#x7684;&#x753B;&#x77E9;&#x5F62;&#x7684;&#x51FD;&#x6570;

function setRectangle(gl&#xFF0C;x&#xFF0C;y&#xFF0C;width&#xFF0C;height) {
  var x1 = x;
  var x2 = x + width;
  var y1 = y;
  var y2 = y + height;

  // &#x6CE8;&#x610F;: gl.bufferData(gl.ARRAY_BUFFER&#xFF0C;...) &#x90FD;&#x4F1A;&#x5F71;&#x54CD;&#x5230;&#xFF0C;
  // &#x4EFB;&#x4F55;&#x7ED1;&#x5B9A;&#x5728; `ARRAY_BUFFER` &#x4E0A;&#x7684; buffer&#x3002;&#x4F46;&#x73B0;&#x5728;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x53EA;&#x6709;&#x4E00;&#x4E2A; buffer
  // &#x5982;&#x679C;&#xFF0C;&#x6211;&#x4EEC;&#x6709;&#x591A;&#x4E2A; buffer &#x9700;&#x8981;&#x7ED1;&#x5B9A;&#x7684;&#x8BDD;&#xFF0C;&#x90A3;&#x4E48;&#x8FD9;&#x4E9B; buffer &#x9700;&#x8981;&#x63D0;&#x524D;&#x7ED1;&#x5B9A;&#x5230; `ARRAY_BUFFER` &#x4E0A;


  gl.bufferData(gl.ARRAY_BUFFER&#xFF0C;new Float32Array([
     x1&#xFF0C;y1&#xFF0C;
     x2&#xFF0C;y1&#xFF0C;
     x1&#xFF0C;y2&#xFF0C;
     x1&#xFF0C;y2&#xFF0C;
     x2&#xFF0C;y1&#xFF0C;
     x2&#xFF0C;y2])&#xFF0C;gl.STATIC_DRAW);
}</code></pre>
<p>&#x4E0B;&#x9762;&#x662F;&#x7528;&#x4EE3;&#x7801;&#x753B;&#x51FA;&#x6765;&#x7684;&#x77E9;&#x5F62;&#x56FE;:</p><p><img src="http://static.zybuluo.com/jimmythr/k4vb543kjesvsj162x3m8iv9/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202016-09-22%2022.38.33.png"></p><p><a href="http://webglfundamentals.org/webgl/webgl-2d-rectangles.html" target="_blank">&#x67E5;&#x770B;&#x5177;&#x4F53;&#x7684;&#x7F51;&#x9875;</a></p><p>WebGL &#x770B;&#x8D77;&#x6765;&#x786E;&#x5B9E;&#x63D0;&#x4F9B;&#x4E86;&#x633A;&#x7B80;&#x5355;&#x7684; API&#x3002;&#x7B80;&#x5355;&#x5417;&#xFF1F; &#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x8FD9;&#x91CC;&#x4EC5;&#x4EC5;&#x4F7F;&#x7528; 2 user &#x63D0;&#x4F9B;&#x7684;&#x51FD;&#x6570;&#xFF0C;&#x9876;&#x70B9;&#x7740;&#x8272;&#x5668; &#x548C; fragmetn shader&#x3002;&#x7136;&#x540E;&#x4F7F;&#x7528;&#x5B83;&#x4EEC;&#x6765;&#x753B;&#x4E09;&#x89D2;&#xFF0C;&#x7EBF; &#x6216;&#x8005;&#x70B9;&#x3002;&#x5982;&#x679C;&#x4F60;&#x60F3;&#x753B;&#x6BD4;&#x8F83;&#x590D;&#x6742;&#x7684;3D&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x9700;&#x8981;&#x66F4;&#x590D;&#x6742;&#x7684; shaders&#x3002;WebGL API &#x53EA;&#x662F;&#x4E00;&#x4E2A;&#x5149;&#x6805;&#x5316;&#x5E76;&#x4E14;&#x539F;&#x7406;&#x4E5F;&#x633A;&#x7B80;&#x5355;(&#x5750;&#x6807;&#x7ECF;&#x8FC7;&#x5149;&#x6805;&#x5316;&#xFF0C;&#x8F6C;&#x5316;&#x4E3A;&#x9010;&#x50CF;&#x7D20;&#x7684;&#x6570;&#x636E;)&#x3002;</p><p>&#x4E0A;&#x9762;&#xFF0C;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x8BB2;&#x89E3;&#x4E86;&#x600E;&#x6837;&#x5C06;&#x6570;&#x636E;&#x7ED9;&#x4E00;&#x4E2A; attribute &#x548C;2&#x4E2A; uniforms&#x3002;&#x8FD9;&#x662F;&#x6BD4;&#x8F83;&#x7B80;&#x5355;&#x7684;&#xFF0C;&#x5F53;&#x7136;&#xFF0C;&#x4E5F;&#x5B58;&#x5728;&#x591A;&#x4E2A; attribute &#x548C; uniforms &#x7684;&#x60C5;&#x51B5;&#x3002;&#x5728;&#x6587;&#x7AE0;&#x7684;&#x5F00;&#x5934;&#xFF0C;&#x6211;&#x4EEC;&#x63D0;&#x5230;&#x8FC7; <code>varyings</code> &#x548C; <code>textures</code>&#x3002;&#x8FD9;&#x4E24;&#x4E2A;&#x6982;&#x5FF5;&#x4F1A;&#x5728;&#x540E;&#x9762;&#x7684;&#x7AE0;&#x8282;&#x91CC;&#x9762;&#x8FDB;&#x884C;&#x9610;&#x8FF0;&#x3002;</p><p>&#x5728;&#x7EE7;&#x7EED;&#x8BB2;&#x89E3;&#x4E4B;&#x524D;&#xFF0C;&#x6211;&#x60F3;&#x8BF4;&#x4E00;&#x70B9;&#xFF0C;&#x50CF;&#x4E0A;&#x9762; setRectangle &#x90A3;&#x6837;&#xFF0C;&#x52A8;&#x6001;&#x7684;&#x66F4;&#x65B0; buffer &#x91CC;&#x9762;&#x7684;&#x6570;&#x636E;&#x5E76;&#x4E0D;&#x5E38;&#x89C1;&#x3002; &#x6211;&#x4F7F;&#x7528;&#x90A3;&#x4E2A;&#x4F8B;&#x5B50;&#x7684;&#xFF0C;&#x4E3B;&#x8981;&#x8003;&#x8651;&#x5230;&#x4ED6;&#x672C;&#x8EAB;&#x6BD4;&#x8F83;&#x7B80;&#x5355;&#xFF0C;&#x800C;&#x4E14;&#x4ED6;&#x4F7F;&#x7528;&#x7684;&#x662F;&#x50CF;&#x7D20;&#x5750;&#x6807;&#xFF0C;&#x5E76;&#x4E14;&#x505A;&#x7684;&#x6570;&#x5B66;&#x8FD0;&#x7B97;&#x4E5F;&#x4E0D;&#x591A;&#x3002;&#x5F53;&#x7136;&#xFF0C;&#x5173;&#x4E8E; WebGL &#x4E0D;&#x6B62;&#x8FD9;&#x4E00;&#x70B9;&#x70B9;&#x5185;&#x5BB9;&#x3002;&#x4F60;&#x53EF;&#x4EE5;&#x7EE7;&#x7EED;&#x5B66;&#x4E60;&#x5728; <a href="http://webglfundamentals.org/webgl/lessons/webgl-2d-translation.html" target="_blank">WebGL &#x4E2D;&#x7684;&#x5B9A;&#x4F4D;&#xFF0C;&#x65B9;&#x5411;&#x548C;&#x7F29;&#x653E;&#x7684;&#x57FA;&#x672C;&#x65B9;&#x5F0F;</a>&#x3002;</p><p>&#x5982;&#x679C;&#xFF0C;&#x4F60;&#x5BF9; WebGL&#xFF0C;GLSL &#x548C; shaders &#x4E0D;&#x4E86;&#x89E3;&#xFF0C;&#x6216;&#x8005;&#x4E0D;&#x77E5;&#x9053; GPU &#x662F;&#x600E;&#x4E48;&#x8FD0;&#x884C;&#x7684;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x53C2;&#x8003; <a href="http://webglfundamentals.org/webgl/lessons/webgl-how-it-works.html" target="_blank">WebGL &#x5DE5;&#x4F5C;&#x539F;&#x7406;</a>&#x3002;</p><p>&#x53E6;&#x5916;&#xFF0C;&#x4F60;&#x8FD8;&#x9700;&#x8981;&#x7B80;&#x5355;&#x7684;&#x8BFB;&#x4E00;&#x8BFB;<a href="http://webglfundamentals.org/webgl/lessons/webgl-boilerplate.html" target="_blank">&#x5728;&#x5F88;&#x591A;&#x4F8B;&#x5B50;&#x4E2D;&#x4F7F;&#x7528;&#x7684;&#x6A21;&#x677F;&#x4EE3;&#x7801;</a>&#x3002;&#x7B80;&#x5355;&#x7684;&#x6D4F;&#x89C8;&#x4E00;&#x4E0B;<a href="http://webglfundamentals.org/webgl/lessons/webgl-drawing-multiple-things.html" target="_blank">&#x600E;&#x4E48;&#x53BB;&#x753B;&#x4E0D;&#x540C;&#x7684;&#x4E1C;&#x897F;</a>&#xFF0C;&#x6216;&#x8BB8;&#x8FD9;&#x80FD;&#x591F;&#x7ED9;&#x4F60;&#x4E00;&#x4E9B;&#x542F;&#x53D1;&#xFF0C;&#x5173;&#x4E8E;&#x5927;&#x90E8;&#x5206; WebGL &#x5E94;&#x7528;&#x662F;&#x5982;&#x4F55;&#x8FD0;&#x884C;&#x7684;&#x3002;&#x56E0;&#x4E3A;&#xFF0C;&#x6211;&#x4EEC;&#x5F88;&#x591A;&#x4F8B;&#x5B50;&#x4EC5;&#x4EC5;&#x53EA;&#x662F;&#x753B;&#x4E00;&#x4E2A;&#x4E1C;&#x897F;&#xFF0C;&#x5E76;&#x4E14;&#xFF0C;&#x4E5F;&#x6CA1;&#x628A;&#x5927;&#x81F4;&#x7684;&#x7ED3;&#x6784;&#x5199;&#x51FA;&#x6765;&#x3002;</p><p>&#x63A5;&#x4E0B;&#x6765;&#xFF0C;&#x4F60;&#x6709;&#x4E24;&#x4E2A;&#x5B66;&#x4E60;&#x65B9;&#x5411;&#x3002;&#x5982;&#x679C;&#x4F60;&#x5BF9;&#x56FE;&#x7247;&#x5904;&#x7406;&#x611F;&#x5174;&#x8DA3;&#xFF0C;&#x8FD9;&#x91CC;&#x6709;&#x5982;&#x4F55;&#x5BF9;<a href="http://webglfundamentals.org/webgl/lessons/webgl-image-processing.html" target="_blank">&#x56FE;&#x7247;&#x8FDB;&#x884C;&#x5904;&#x7406;</a>&#x7684;&#x76F8;&#x5173;&#x5185;&#x5BB9;&#x3002;&#x5982;&#x679C;&#x4F60;&#x66F4;&#x60F3;&#x5B66;&#x4E60;&#x5E73;&#x79FB;&#xFF0C;&#x65CB;&#x8F6C;&#xFF0C;&#x7F29;&#x653E;&#x7B49;&#x6280;&#x80FD;&#x7684;&#x8BDD;&#xFF0C;<a href="http://webglfundamentals.org/webgl/lessons/webgl-2d-translation.html" target="_blank">&#x8FD9;&#x66F4;&#x9002;&#x5408;&#x4F60;</a>&#x3002;</p><p><strong>&#x8865;&#x5145;&#x77E5;&#x8BC6;</strong></p><hr><h2 id="typenojs-&#x6807;&#x7B7E;&#x7684;&#x610F;&#x4E49;">type=&quot;nojs&quot; &#x6807;&#x7B7E;&#x7684;&#x610F;&#x4E49;</h2><p><code>&lt;script&gt;</code>&#x6807;&#x7B7E;&#x6700;&#x5927;&#x7684;&#x7528;&#x9014;&#x5C31;&#x662F;&#x5305;&#x88F9; JavaScript &#x4EE3;&#x7801;&#x3002;&#x5F53;<code>&lt;script&gt;</code> &#x6CA1;&#x6709;&#x8BBE;&#x7F6E; type&#xFF0C;&#x6216;&#x8005;&#x8BBE;&#x7F6E; <code>type=&quot;javascript&quot;</code> &#x6216; <code>type=&quot;text/javascript&quot;</code>&#xFF0C;&#x6D4F;&#x89C8;&#x5668;&#x5C31;&#x4F1A;&#x5C06;&#x91CC;&#x9762;&#x7684;&#x5185;&#x5BB9;&#x5F53;&#x505A; JavaScript &#x4EE3;&#x7801;&#x6765;&#x89E3;&#x6790;&#x3002;&#x5982;&#x679C;&#xFF0C;type &#x8BBE;&#x7F6E;&#x4E3A;&#x5176;&#x4ED6;&#x7684;&#x5185;&#x5BB9;&#x8BDD;&#xFF0C;&#x90A3;&#x4E48;&#x6D4F;&#x89C8;&#x5668;&#x5C31;&#x4F1A;&#x8DF3;&#x8FC7;&#x8BE5; <code>&lt;script&gt;</code> &#x6807;&#x7B7E;&#x3002;&#x6240;&#x4EE5;&#xFF0C;&#x6211;&#x4EEC;&#x8BBE;&#x7F6E;&#x7684; <code>type=&quot;notjs&quot;</code> &#x6216;&#x8005; <code>type=&quot;foobar&quot;</code> &#x6D4F;&#x89C8;&#x5668;&#x5E76;&#x4E0D;&#x4F1A;&#x5173;&#x5FC3;&#x91CC;&#x9762;&#x7684;&#x5185;&#x5BB9;&#x3002;</p><p>&#x8FD9;&#x8BA9;&#x6211;&#x4EEC;&#x5F88;&#x5BB9;&#x6613;&#x5BF9;&#x7740;&#x8272;&#x5668;&#x8FDB;&#x884C;&#x7F16;&#x8F91;&#x3002;&#x53E6;&#x5916;&#xFF0C;&#x8FD8;&#x6709;&#x5176;&#x4ED6;&#x7740;&#x8272;&#x5668;&#x7684;&#x5199;&#x6CD5;&#xFF0C;&#x6BD4;&#x5982;&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x62FC;&#x63A5;:</p><pre><code> var shaderSource =
    &quot;void main() {\n&quot; +
    &quot;  gl_FragColor = vec4(1&#xFF0C;0&#xFF0C;0&#xFF0C;1);\n&quot; +
    &quot;}&quot;;</code></pre>
<p>&#x6216;&#x8005;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; ajax &#x52A8;&#x6001;&#x52A0;&#x8F7D;&#x7740;&#x8272;&#x5668;&#xFF0C;&#x4E0D;&#x8FC7;&#xFF0C;&#x8FD9;&#x6709;&#x70B9;&#x6162;&#x5E76;&#x4E14;&#x4E0D;&#x540C;&#x6B65;&#x3002;</p><p>&#x53E6;&#x5916;&#x4E00;&#x79CD;&#x53EF;&#x9009;&#x7684;&#x65B9;&#x6848;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x591A;&#x884C;&#x6A21;&#x677F;&#x5B57;&#x9762;&#x91CF;(&#x8FD9;&#x662F; es6 &#x65B0;&#x63D0;&#x51FA;&#x7684;&#x7279;&#x6027;)</p><pre><code>  var shaderSource = `
    void main() {
      gl_FragColor = vec4(1&#xFF0C;0&#xFF0C;0&#xFF0C;1);
    }
  `;</code></pre>
<p>&#x591A;&#x884C;&#x6A21;&#x677F;&#x5B57;&#x9762;&#x91CF;&#x5728;&#x6240;&#x6709;&#x7684;&#x6D4F;&#x89C8;&#x5668;&#x4E2D;&#xFF0C;&#x90FD;&#x5DF2;&#x7ECF;&#x5F97;&#x5230;&#x652F;&#x6301;&#x3002;&#x4E0D;&#x8FC7;&#xFF0C;&#x4F4E;&#x7248;&#x672C;&#x7684;&#x5C31;&#x4E0D;&#x652F;&#x6301;&#x4E86;&#xFF0C;&#x6240;&#x4EE5;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x9700;&#x8981;&#x5411;&#x4E0B;&#x517C;&#x5BB9;&#x7684;&#x8BDD;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x4E0D;&#x80FD;&#x4F7F;&#x7528;&#x591A;&#x884C;&#x6A21;&#x677F;&#x5B57;&#x9762;&#x91CF;&#x6216;&#x8005;&#x4F7F;&#x7528;&#x8F6C;&#x8BD1;&#x5668;&#x8FDB;&#x884C;&#x4EE3;&#x66FF;&#x3002;</p><p>&#x6709;&#x95EE;&#x9898;? <a href="http://stackoverflow.com/questions/tagged/webgl" target="_blank">&#x5728; stack overflow &#x4E0A;&#x63D0;&#x95EE;</a>&#x3002;
Issue/Bug? <a href="https://github.com/greggman/webgl-fundamentals/issues" target="_blank">&#x5728; github &#x4E0A;&#x521B;&#x5EFA; issue</a>&#x3002;</p>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="./" class="navigation navigation-prev " aria-label="Previous page: Fundamentals">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="WebGL-How-It-Works.html" class="navigation navigation-next " aria-label="Next page: WebGL How It Works">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"WebGL Fundamentals","level":"1.2.1","depth":2,"next":{"title":"WebGL How It Works","level":"1.2.2","depth":2,"path":"fundamentals/WebGL-How-It-Works.md","ref":"fundamentals/WebGL-How-It-Works.md","articles":[]},"previous":{"title":"Fundamentals","level":"1.2","depth":1,"path":"fundamentals/README.md","ref":"fundamentals/README.md","articles":[{"title":"WebGL Fundamentals","level":"1.2.1","depth":2,"path":"fundamentals/WebGL-Fundamentals.md","ref":"fundamentals/WebGL-Fundamentals.md","articles":[]},{"title":"WebGL How It Works","level":"1.2.2","depth":2,"path":"fundamentals/WebGL-How-It-Works.md","ref":"fundamentals/WebGL-How-It-Works.md","articles":[]},{"title":"WebGL Shaders and GLSL","level":"1.2.3","depth":2,"path":"fundamentals/WebGL-Shaders-and-GLSL.md","ref":"fundamentals/WebGL-Shaders-and-GLSL.md","articles":[]}]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["livereload"],"pluginsConfig":{"livereload":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"fundamentals/WebGL-Fundamentals.md","mtime":"2016-09-30T13:05:51.000Z","type":"markdown"},"gitbook":{"version":"3.2.0","time":"2016-09-30T12:55:45.235Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

