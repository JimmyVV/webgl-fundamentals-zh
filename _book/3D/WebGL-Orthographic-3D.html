
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <title>WebGL - Orthographic 3D · GitBook</title>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.0">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="WebGL-3D-Perspective.html" />
    
    
    <link rel="prev" href="./" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    简介
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../fundamentals/">
            
                <a href="../fundamentals/">
            
                    
                    Fundamentals
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../fundamentals/WebGL-Fundamentals.html">
            
                <a href="../fundamentals/WebGL-Fundamentals.html">
            
                    
                    WebGL Fundamentals
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../fundamentals/WebGL-How-It-Works.html">
            
                <a href="../fundamentals/WebGL-How-It-Works.html">
            
                    
                    WebGL How It Works
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../fundamentals/WebGL-Shaders-and-GLSL.html">
            
                <a href="../fundamentals/WebGL-Shaders-and-GLSL.html">
            
                    
                    WebGL Shaders and GLSL
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../image-processing/">
            
                <a href="../image-processing/">
            
                    
                    Image Processing
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../image-processing/WebGL-Image-Processing.html">
            
                <a href="../image-processing/WebGL-Image-Processing.html">
            
                    
                    WebGL Image Processing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../image-processing/WebGL-Image-Processing-Continued.html">
            
                <a href="../image-processing/WebGL-Image-Processing-Continued.html">
            
                    
                    WebGL Image Processing Continued
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../2D-translation/">
            
                <a href="../2D-translation/">
            
                    
                    2D translation, rotation, scale, matrix math
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../2D-translation/WebGL-2D-Translation.html">
            
                <a href="../2D-translation/WebGL-2D-Translation.html">
            
                    
                    WebGL 2D Translation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../2D-translation/WebGL-2D-Rotation.html">
            
                <a href="../2D-translation/WebGL-2D-Rotation.html">
            
                    
                    WebGL 2D Rotation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../2D-translation/WebGL-2D-Scale.html">
            
                <a href="../2D-translation/WebGL-2D-Scale.html">
            
                    
                    WebGL 2D Scale
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../2D-translation/WebGL-2D-Matrices.html">
            
                <a href="../2D-translation/WebGL-2D-Matrices.html">
            
                    
                    WebGL 2D Matrices
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="./">
            
                <a href="./">
            
                    
                    3D
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.5.1" data-path="WebGL-Orthographic-3D.html">
            
                <a href="WebGL-Orthographic-3D.html">
            
                    
                    WebGL - Orthographic 3D
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="WebGL-3D-Perspective.html">
            
                <a href="WebGL-3D-Perspective.html">
            
                    
                    WebGL 3D Perspective
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="WebGL-3D-Cameras.html">
            
                <a href="WebGL-3D-Cameras.html">
            
                    
                    WebGL 3D - Cameras
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../lighting/">
            
                <a href="../lighting/">
            
                    
                    Lighting
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../lighting/WebGL-3D-Directional-Lighting.html">
            
                <a href="../lighting/WebGL-3D-Directional-Lighting.html">
            
                    
                    WebGL 3D - Directional Lighting
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../lighting/WebGL-3D-Point-Lighting.html">
            
                <a href="../lighting/WebGL-3D-Point-Lighting.html">
            
                    
                    WebGL 3D - Point Lighting
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../Structure-and-Organization/">
            
                <a href="../Structure-and-Organization/">
            
                    
                    Structure and Organization
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../Structure-and-Organization/WebGL-Less-Code-More-Fun.html">
            
                <a href="../Structure-and-Organization/WebGL-Less-Code-More-Fun.html">
            
                    
                    WebGL - Less Code, More Fun
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="../Structure-and-Organization/WebGL-Drawing-Multiple-Things.html">
            
                <a href="../Structure-and-Organization/WebGL-Drawing-Multiple-Things.html">
            
                    
                    WebGL - Drawing Multiple Things
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="../Structure-and-Organization/WebGL-Scene-Graphs.html">
            
                <a href="../Structure-and-Organization/WebGL-Scene-Graphs.html">
            
                    
                    WebGL - Scene Graphs
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../techniques/">
            
                <a href="../techniques/">
            
                    
                    Techniques
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="../techniques/WebGL-2D-DrawImage.html">
            
                <a href="../techniques/WebGL-2D-DrawImage.html">
            
                    
                    WebGL 2D - DrawImage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="../techniques/WebGL-2D-Matrix-Stack.html">
            
                <a href="../techniques/WebGL-2D-Matrix-Stack.html">
            
                    
                    WebGL 2D - Matrix Stack
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="../techniques/WebGL-Text-HTML.html">
            
                <a href="../techniques/WebGL-Text-HTML.html">
            
                    
                    WebGL Text - HTML
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4" data-path="../techniques/WebGL-Text-Canvas-2D.html">
            
                <a href="../techniques/WebGL-Text-Canvas-2D.html">
            
                    
                    WebGL Text - Canvas 2D
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.5" data-path="../techniques/WebGL-Text-Using-a-Texture.html">
            
                <a href="../techniques/WebGL-Text-Using-a-Texture.html">
            
                    
                    WebGL Text - Using a Texture
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.6" data-path="../techniques/WebGL-Text-Using-a-Glyph-Texture.html">
            
                <a href="../techniques/WebGL-Text-Using-a-Glyph-Texture.html">
            
                    
                    WebGL Text - Using a Glyph Texture
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../misc/">
            
                <a href="../misc/">
            
                    
                    Misc
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="../misc/WebGL-Setup-And-Installation.html">
            
                <a href="../misc/WebGL-Setup-And-Installation.html">
            
                    
                    WebGL Setup And Installation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2" data-path="../misc/WebGL-Boilerplate.html">
            
                <a href="../misc/WebGL-Boilerplate.html">
            
                    
                    WebGL Boilerplate
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3" data-path="../misc/WebGL-Resizing-the-Canvas.html">
            
                <a href="../misc/WebGL-Resizing-the-Canvas.html">
            
                    
                    WebGL Resizing the Canvas
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.4" data-path="../misc/WebGL-Animation.html">
            
                <a href="../misc/WebGL-Animation.html">
            
                    
                    WebGL - Animation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.5" data-path="../misc/WebGL-3D-Textures.html">
            
                <a href="../misc/WebGL-3D-Textures.html">
            
                    
                    WebGL 3D - Textures
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.6" data-path="../misc/WebGL-Using-2-or-More-Textures.html">
            
                <a href="../misc/WebGL-Using-2-or-More-Textures.html">
            
                    
                    WebGL Using 2 or More Textures
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.7" data-path="../misc/WebGL-and-Alpha.html">
            
                <a href="../misc/WebGL-and-Alpha.html">
            
                    
                    WebGL and Alpha
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.8" data-path="../misc/WebGL-2D-vs-3D-libraries.html">
            
                <a href="../misc/WebGL-2D-vs-3D-libraries.html">
            
                    
                    WebGL - 2D vs 3D libraries
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.9" data-path="../misc/WebGL-Anti-Patterns.html">
            
                <a href="../misc/WebGL-Anti-Patterns.html">
            
                    
                    WebGL - Anti-Patterns
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../Helper-API-Docs/">
            
                <a href="../Helper-API-Docs/">
            
                    
                    Helper API Docs
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="../TWGL-A-tiny-WebGL-helper-library/">
            
                <a href="../TWGL-A-tiny-WebGL-helper-library/">
            
                    
                    TWGL, A tiny WebGL helper library
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="../术语/">
            
                <a href="../术语/">
            
                    
                    术语
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13" >
            
                <a target="_blank" href="https://github.com/greggman/webgl-fundamentals">
            
                    
                    github
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >WebGL - Orthographic 3D</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="webgl---orthographic-3d">WebGL - Orthographic 3D</h1><h1 id="webgl---&#x6B63;&#x4EA4;3d">WebGL - &#x6B63;&#x4EA4;3D</h1><p>This post is a continuation of a series of posts about WebGL. The first <a href="http://webglfundamentals.org/webgl/lessons/webgl-fundamentals.html" target="_blank">started with fundamentals</a> and the previous was <a href="http://webglfundamentals.org/webgl/lessons/webgl-2d-matrices.html" target="_blank">about 2D matrices</a>. If you haven&apos;t read those please view them first.</p><p>&#x5728;&#x8FD9;&#x91CC;&#xFF0C;&#x6211;&#x4EEC;&#x5C06;&#x7EE7;&#x7EED;&#x5B66;&#x4E60;WebGL&#x3002;&#x672C;&#x6587;&#x5047;&#x5B9A;&#x4F60;&#x5DF2;&#x7ECF;&#x5BF9;<a href="http://webglfundamentals.org/webgl/lessons/webgl-fundamentals.html" target="_blank">WebGL&#x57FA;&#x7840;</a>&#xFF0C;<a href="http://webglfundamentals.org/webgl/lessons/webgl-2d-matrices.html" target="_blank">&#x4E8C;&#x7EF4;&#x77E9;&#x9635;&#xFF08;2D matrices&#xFF09;</a>&#x6709;&#x6240;&#x4E86;&#x89E3;&#x3002;&#x5982;&#x679C;&#x4F60;&#x8FD8;&#x672A;&#x9605;&#x8BFB;&#x8FC7;&#x8FD9;&#x4E9B;&#x7AE0;&#x8282;&#xFF0C;&#x8BF7;&#x5148;&#x79FB;&#x6B65;&#x5230;&#x76F8;&#x5E94;&#x7AE0;&#x8282;&#x3002;</p><p>In the last post we went over how 2D matrices worked. We talked about how translation, rotation, scaling, and even projecting from pixels into clip space can all be done by 1 matrix and some magic matrix math. To do 3D is only a small step from there.</p><p>&#x4E0A;&#x4E00;&#x7BC7;&#x6587;&#x7AE0;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x5B66;&#x4E60;&#x4E86;&#x4E8C;&#x7EF4;&#x77E9;&#x9635;&#xFF08;2D matrices&#xFF09;&#x7684;&#x5DE5;&#x4F5C;&#x65B9;&#x5F0F;&#x3002;&#x5982;&#x4F4D;&#x79FB;&#xFF08;translation&#xFF09;&#x3001;&#x65CB;&#x8F6C;&#xFF08;rotation&#xFF09;&#x3001;&#x7F29;&#x653E;&#xFF08;scale&#xFF09;&#x3001;&#x50CF;&#x7D20;&#x7A7A;&#x95F4;&#x5230;&#x88C1;&#x5207;&#x7A7A;&#x95F4;&#x7684;&#x6295;&#x5C04;&#xFF08;projection from pixels into clip space&#xFF09;&#xFF0C;&#x8FD9;&#x4E9B;&#x64CD;&#x4F5C;&#x90FD;&#x80FD;&#x901A;&#x8FC7;&#x77E9;&#x9635;&#x8FD0;&#x7B97;&#xFF0C;&#x7136;&#x540E;&#x7528;1&#x4E2A;&#x77E9;&#x9635;&#x8868;&#x793A;&#x3002;&#x73B0;&#x5728;&#xFF0C;&#x6211;&#x4EEC;&#x53EA;&#x9700;&#x5728;&#x6B64;&#x57FA;&#x7840;&#x4E0A;&#x7A0D;&#x52A0;&#x6539;&#x52A8;&#xFF0C;&#x4FBF;&#x80FD;&#x5B9E;&#x73B0;3D&#x6548;&#x679C;&#x3002;</p><p>In our previous 2D examples we had 2D points (x, y) that we multiplied by a 3x3 matrix. To do 3D we need 3D points (x, y, z) and a 4x4 matrix.</p><p>&#x5728;&#x4E4B;&#x524D;2D&#x7684;&#x4F8B;&#x5B50;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x7528;&#x4E8C;&#x7EF4;&#x5750;&#x6807;(x,y)&#x4E58;&#x4EE5;&#x4E00;&#x4E2A;3X3&#x77E9;&#x9635; &#x3002;&#x4E3A;&#x4E86;&#x5B9E;&#x73B0;3D&#x6548;&#x679C;&#xFF0C;&#x6211;&#x4EEC;&#x8FD9;&#x6B21;&#x9700;&#x8981;&#x4E09;&#x7EF4;&#x5750;&#x6807;(x,y,z)&#x548C;&#x4E00;&#x4E2A;4X4&#x77E9;&#x9635;&#x3002;</p><p>Let&apos;s take our last example and change it to 3D. We&apos;ll use an F again but this time a 3D &apos;F&apos;.</p><p>The first thing we need to do is change the vertex shader to handle 3D. Here&apos;s the old shader.</p><p>And here&apos;s the new one</p><p>It got even simpler!</p><p>Then we need to provide 3D data.</p><p>&#x5728;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x4E0A;&#x4E00;&#x4E2A;&#x4F8B;&#x5B50;&#xFF0C;&#x7136;&#x540E;&#x5C06;&#x5176;&#x8F6C;&#x6362;&#x4E3A;3D&#x3002;&#x4F9D;&#x7136;&#x662F;&#x4E00;&#x4E2A;&#x201C;F&#x201D;&#xFF0C;&#x4F46;&#x8FD9;&#x6B21;&#x662F;3D&#x7684;&#x201C;F&#x201D;&#x3002;</p><p>&#x9996;&#x5148;&#xFF0C;&#x9700;&#x8981;&#x8BA9;&#x9876;&#x70B9;&#x7740;&#x8272;&#x5668;&#xFF08;vertex shader&#xFF09;&#x5177;&#x6709;&#x5904;&#x7406;3D&#x7684;&#x80FD;&#x529B;&#x3002;
&#x65E7;&#x7248;&#x672C;&#x9876;&#x70B9;&#x7740;&#x8272;&#x5668;&#xFF1A;</p><pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;2d-vertex-shader&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;x-shader/x-vertex&quot;</span>&gt;</span><span class="actionscript">
attribute vec2 a_position;

uniform mat3 u_matrix;

<span class="hljs-keyword">void</span> main() {
  <span class="hljs-comment">// Multiply the position by the matrix.</span>
  gl_Position = vec4((u_matrix * vec3(a_position, <span class="hljs-number">1</span>)).xy, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>);
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre>
<p>&#x65B0;&#x7248;&#x672C;&#x9876;&#x70B9;&#x7740;&#x8272;&#x5668;&#xFF1A;</p><pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;3d-vertex-shader&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;x-shader/x-vertex&quot;</span>&gt;</span><span class="actionscript">
attribute vec4 a_position;

uniform mat4 u_matrix;

<span class="hljs-keyword">void</span> main() {
  <span class="hljs-comment">// Multiply the position by the matrix.</span>
  gl_Position = u_matrix * a_position;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre>
<p>&#x751A;&#x81F3;&#x53D8;&#x5F97;&#x66F4;&#x52A0;&#x7B80;&#x6D01;&#x4E86;&#xFF01;</p><p>&#x63D0;&#x4F9B;3D&#x5750;&#x6807;&#x6570;&#x636E;&#xFF1A;</p><pre><code class="lang-js">...

  gl.vertexAttribPointer(positionLocation, <span class="hljs-number">3</span>, gl.FLOAT, <span class="hljs-literal">false</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);

  ...

<span class="hljs-comment">// Fill the buffer with the values that define a letter &apos;F&apos;.</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setGeometry</span>(<span class="hljs-params">gl</span>) </span>{
  gl.bufferData(
      gl.ARRAY_BUFFER,
      <span class="hljs-keyword">new</span> <span class="hljs-built_in">Float32Array</span>([
          <span class="hljs-comment">// left column</span>
            <span class="hljs-number">0</span>,   <span class="hljs-number">0</span>,  <span class="hljs-number">0</span>,
           <span class="hljs-number">30</span>,   <span class="hljs-number">0</span>,  <span class="hljs-number">0</span>,
            <span class="hljs-number">0</span>, <span class="hljs-number">150</span>,  <span class="hljs-number">0</span>,
            <span class="hljs-number">0</span>, <span class="hljs-number">150</span>,  <span class="hljs-number">0</span>,
           <span class="hljs-number">30</span>,   <span class="hljs-number">0</span>,  <span class="hljs-number">0</span>,
           <span class="hljs-number">30</span>, <span class="hljs-number">150</span>,  <span class="hljs-number">0</span>,

          <span class="hljs-comment">// top rung</span>
           <span class="hljs-number">30</span>,   <span class="hljs-number">0</span>,  <span class="hljs-number">0</span>,
          <span class="hljs-number">100</span>,   <span class="hljs-number">0</span>,  <span class="hljs-number">0</span>,
           <span class="hljs-number">30</span>,  <span class="hljs-number">30</span>,  <span class="hljs-number">0</span>,
           <span class="hljs-number">30</span>,  <span class="hljs-number">30</span>,  <span class="hljs-number">0</span>,
          <span class="hljs-number">100</span>,   <span class="hljs-number">0</span>,  <span class="hljs-number">0</span>,
          <span class="hljs-number">100</span>,  <span class="hljs-number">30</span>,  <span class="hljs-number">0</span>,

          <span class="hljs-comment">// middle rung</span>
           <span class="hljs-number">30</span>,  <span class="hljs-number">60</span>,  <span class="hljs-number">0</span>,
           <span class="hljs-number">67</span>,  <span class="hljs-number">60</span>,  <span class="hljs-number">0</span>,
           <span class="hljs-number">30</span>,  <span class="hljs-number">90</span>,  <span class="hljs-number">0</span>,
           <span class="hljs-number">30</span>,  <span class="hljs-number">90</span>,  <span class="hljs-number">0</span>,
           <span class="hljs-number">67</span>,  <span class="hljs-number">60</span>,  <span class="hljs-number">0</span>,
           <span class="hljs-number">67</span>,  <span class="hljs-number">90</span>,  <span class="hljs-number">0</span>]),
      gl.STATIC_DRAW);
}</code></pre>
<p>Next we need to change all the matrix functions from 2D to 3D</p><p>Here are the 2D (before) versions of makeTranslation, makeRotation and makeScale</p><p>&#x63A5;&#x4E0B;&#x6765;&#xFF0C;&#x9700;&#x8981;&#x5C06;2D&#x77E9;&#x9635;&#x51FD;&#x6570;&#x8F6C;&#x6362;&#x4E3A;3D&#x77E9;&#x9635;&#x51FD;&#x6570;</p><p>2D&#x7248;&#x672C;&#x7684;<code>makeTranslation</code>&#x3001;<code>makeRotation</code>&#x3001;<code>makeScale</code>&#xFF1A;</p><pre><code class="lang-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">makeTranslation</span>(<span class="hljs-params">tx, ty</span>) </span>{
  <span class="hljs-keyword">return</span> [
    <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>,
    <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>,
    tx, ty, <span class="hljs-number">1</span>
  ];
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">makeRotation</span>(<span class="hljs-params">angleInRadians</span>) </span>{
  <span class="hljs-keyword">var</span> c = <span class="hljs-built_in">Math</span>.cos(angleInRadians);
  <span class="hljs-keyword">var</span> s = <span class="hljs-built_in">Math</span>.sin(angleInRadians);
  <span class="hljs-keyword">return</span> [
    c,-s, <span class="hljs-number">0</span>,
    s, c, <span class="hljs-number">0</span>,
    <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>
  ];
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">makeScale</span>(<span class="hljs-params">sx, sy</span>) </span>{
  <span class="hljs-keyword">return</span> [
    sx, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>,
    <span class="hljs-number">0</span>, sy, <span class="hljs-number">0</span>,
    <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>
  ];
}</code></pre>
<p>And here are the updated 3D versions.</p><p>&#x66F4;&#x65B0;&#x540E;&#x7684;3D&#x7248;&#x672C;&#xFF1A;</p><pre><code class="lang-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">makeTranslation</span>(<span class="hljs-params">tx, ty, tz</span>) </span>{
  <span class="hljs-keyword">return</span> [
     <span class="hljs-number">1</span>,  <span class="hljs-number">0</span>,  <span class="hljs-number">0</span>,  <span class="hljs-number">0</span>,
     <span class="hljs-number">0</span>,  <span class="hljs-number">1</span>,  <span class="hljs-number">0</span>,  <span class="hljs-number">0</span>,
     <span class="hljs-number">0</span>,  <span class="hljs-number">0</span>,  <span class="hljs-number">1</span>,  <span class="hljs-number">0</span>,
     tx, ty, tz, <span class="hljs-number">1</span>
  ];
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">makeXRotation</span>(<span class="hljs-params">angleInRadians</span>) </span>{
  <span class="hljs-keyword">var</span> c = <span class="hljs-built_in">Math</span>.cos(angleInRadians);
  <span class="hljs-keyword">var</span> s = <span class="hljs-built_in">Math</span>.sin(angleInRadians);

  <span class="hljs-keyword">return</span> [
    <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>,
    <span class="hljs-number">0</span>, c, s, <span class="hljs-number">0</span>,
    <span class="hljs-number">0</span>, -s, c, <span class="hljs-number">0</span>,
    <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>
  ];
};

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">makeYRotation</span>(<span class="hljs-params">angleInRadians</span>) </span>{
  <span class="hljs-keyword">var</span> c = <span class="hljs-built_in">Math</span>.cos(angleInRadians);
  <span class="hljs-keyword">var</span> s = <span class="hljs-built_in">Math</span>.sin(angleInRadians);

  <span class="hljs-keyword">return</span> [
    c, <span class="hljs-number">0</span>, -s, <span class="hljs-number">0</span>,
    <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>,
    s, <span class="hljs-number">0</span>, c, <span class="hljs-number">0</span>,
    <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>
  ];
};

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">makeZRotation</span>(<span class="hljs-params">angleInRadians</span>) </span>{
  <span class="hljs-keyword">var</span> c = <span class="hljs-built_in">Math</span>.cos(angleInRadians);
  <span class="hljs-keyword">var</span> s = <span class="hljs-built_in">Math</span>.sin(angleInRadians);

  <span class="hljs-keyword">return</span> [
     c, s, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>,
    -s, c, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>,
     <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>,
     <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>,
  ];
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">makeScale</span>(<span class="hljs-params">sx, sy, sz</span>) </span>{
  <span class="hljs-keyword">return</span> [
    sx, <span class="hljs-number">0</span>,  <span class="hljs-number">0</span>,  <span class="hljs-number">0</span>,
    <span class="hljs-number">0</span>, sy,  <span class="hljs-number">0</span>,  <span class="hljs-number">0</span>,
    <span class="hljs-number">0</span>,  <span class="hljs-number">0</span>, sz,  <span class="hljs-number">0</span>,
    <span class="hljs-number">0</span>,  <span class="hljs-number">0</span>,  <span class="hljs-number">0</span>,  <span class="hljs-number">1</span>,
  ];
}</code></pre>
<p>Notice we now have 3 rotation functions. We only needed one in 2D as we were effectively only rotating around the Z axis. Now though to do 3D we also want to be able to rotate around the X axis and Y axis as well. You can see from looking at them they are all very similar. If we were to work them out you&apos;d see them simplify just like before</p><p>&#x6CE8;&#x610F;&#xFF0C;&#x5728;&#x8FD9;&#x91CC;&#x6709;3&#x4E2A;&#x65CB;&#x8F6C;&#x51FD;&#x6570;&#x3002;&#x7531;&#x4E8E;&#x5728;2D&#x4E2D;&#xFF0C;&#x56FE;&#x5F62;&#x4EC5;&#x4EC5;&#x56F4;&#x7ED5;Z&#x8F74;&#x65CB;&#x8F6C;&#xFF0C;&#x6240;&#x4EE5;&#x53EA;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x3002;&#x800C;&#x5728;3D&#x4E2D;&#xFF0C;&#x8FD8;&#x5B58;&#x5728;&#x56F4;&#x7ED5;X&#x8F74;&#x548C;Y&#x8F74;&#x65CB;&#x8F6C;&#x7684;&#x60C5;&#x51B5;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x901A;&#x8FC7;&#x89C2;&#x5BDF;&#x4E0D;&#x96BE;&#x53D1;&#x73B0;&#xFF0C;3&#x4E2A;&#x51FD;&#x6570;&#x975E;&#x5E38;&#x76F8;&#x4F3C;&#xFF0C;&#x800C;&#x4E14;&#x53EF;&#x4EE5;&#x7528;&#x4E4B;&#x524D;&#x7684;&#x65B9;&#x6CD5;&#x5F88;&#x8F7B;&#x6613;&#x5730;&#x7B97;&#x51FA;&#x3002;</p><p>&#x7ED5;Z&#x8F74;&#x65CB;&#x8F6C;&#xFF1A;</p><p>$$newX = x <em> c + y </em> s;$$</p><p>$$newY = x <em> -s + y </em> c;$$</p><p>&#x7ED5;Y&#x8F74;&#x65CB;&#x8F6C;&#xFF1A;</p><p>$$newX = x <em> c + Z </em> s;$$</p><p>$$newZ = x <em> -s + Z </em> c;$$</p><p>&#x7ED5;X&#x8F74;&#x65CB;&#x8F6C;&#xFF1A;</p><p>$$newY = Y <em> c + Z </em> s;$$</p><p>$$newZ = Y <em> -s + Z </em> c;$$</p><p>&#x4E09;&#x79CD;&#x65CB;&#x8F6C;&#xFF1A;</p><iframe class="external_diagram" src="http://webglfundamentals.org/webgl/lessons/resources/axis-diagram.html" style="width: 540px; height: 240px;"></iframe>




<p>We also need to update the projection function. Here&apos;s the old one</p><p>&#x6211;&#x4EEC;&#x540C;&#x6837;&#x9700;&#x8981;&#x66F4;&#x65B0;&#x7A7A;&#x95F4;&#x6620;&#x5C04;&#x51FD;&#x6570;&#x3002;
&#x539F;&#x6765;&#x7684;&#x7248;&#x672C;&#xFF1A;</p><pre><code class="lang-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">make2DProjection</span>(<span class="hljs-params">width, height</span>) </span>{
  <span class="hljs-comment">// Note: This matrix flips the Y axis so 0 is at the top.</span>
  <span class="hljs-keyword">return</span> [
    <span class="hljs-number">2</span> / width, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>,
    <span class="hljs-number">0</span>, <span class="hljs-number">-2</span> / height, <span class="hljs-number">0</span>,
    <span class="hljs-number">-1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>
  ];
}</code></pre>
<p>which converted from pixels to clip space. For our first attempt at expanding it to 3D let&apos;s try</p><p>&#x4E0A;&#x9762;&#x7684;&#x51FD;&#x6570;&#x5C06;&#x5750;&#x6807;&#x4ECE;&#x50CF;&#x7D20;&#x7A7A;&#x95F4;&#x6295;&#x5C04;&#x5230;&#x4E86;&#x88C1;&#x5207;&#x7A7A;&#x95F4;&#x3002;
&#x6211;&#x4EEC;&#x5C1D;&#x8BD5;&#x5C06;&#x5B83;&#x6269;&#x5C55;&#x4E3A;3D&#x7248;&#x672C;&#xFF1A;</p><pre><code class="lang-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">make2DProjection</span>(<span class="hljs-params">width, height, depth</span>) </span>{
  <span class="hljs-comment">// Note: This matrix flips the Y axis so 0 is at the top.</span>
  <span class="hljs-keyword">return</span> [
     <span class="hljs-number">2</span> / width, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>,
     <span class="hljs-number">0</span>, <span class="hljs-number">-2</span> / height, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>,
     <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span> / depth, <span class="hljs-number">0</span>,
    <span class="hljs-number">-1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>,
  ];
}</code></pre>
<p>Just like we needed to convert from pixels to clip space for X and Y, for Z we need to do the same thing. In this case I&apos;m making the Z axis pixel units as well. I&apos;ll pass in some value similar to width for the depth so our space will be 0 to width pixels wide, 0 to height pixels tall, but for depth it will be -depth / 2 to +depth / 2.</p><p>&#x540C;X&#xFF0C;Y&#x5750;&#x6807;&#x4E00;&#x6837;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x7528;&#x76F8;&#x540C;&#x7684;&#x65B9;&#x6CD5;&#x5C06;Z&#x5750;&#x6807;&#x4ECE;&#x50CF;&#x7D20;&#x7A7A;&#x95F4;&#x6295;&#x5C04;&#x5230;&#x88C1;&#x5207;&#x7A7A;&#x95F4;&#x3002;&#x4E0E;width(&#x5BBD;&#x5EA6;)&#x76F8;&#x4F3C;&#xFF0C;&#x53EF;&#x4EE5;&#x5C06;depth(&#x6DF1;&#x5EA6;)&#x503C;&#x4F20;&#x5165;&#x51FD;&#x6570;&#xFF0C;&#x5219;&#x50CF;&#x7D20;&#x7A7A;&#x95F4;&#x7684;&#x5BBD;&#x5EA6;&#x8303;&#x56F4;&#x4E3A;0~width&#xFF0C;&#x9AD8;&#x5EA6;&#x8303;&#x56F4;0~height&#xFF0C;&#x6DF1;&#x5EA6;&#x8303;&#x56F4;-depth/2 ~ +depth/2&#x3002;</p><p>Finally we need to to update the code that computes the matrix.</p><p>&#x6700;&#x540E;&#xFF0C;&#x9700;&#x8981;&#x4FEE;&#x6539;&#x6295;&#x5C04;&#x77E9;&#x9635;&#xFF1A;</p><pre><code class="lang-js"><span class="hljs-comment">// Compute the matrices</span>
  <span class="hljs-keyword">var</span> projectionMatrix =
      make2DProjection(canvas.clientWidth, canvas.clientHeight, <span class="hljs-number">400</span>);
  <span class="hljs-keyword">var</span> translationMatrix =
      makeTranslation(translation[<span class="hljs-number">0</span>], translation[<span class="hljs-number">1</span>], translation[<span class="hljs-number">2</span>]);
  <span class="hljs-keyword">var</span> rotationXMatrix = makeXRotation(rotation[<span class="hljs-number">0</span>]);
  <span class="hljs-keyword">var</span> rotationYMatrix = makeYRotation(rotation[<span class="hljs-number">1</span>]);
  <span class="hljs-keyword">var</span> rotationZMatrix = makeZRotation(rotation[<span class="hljs-number">2</span>]);
  <span class="hljs-keyword">var</span> scaleMatrix = makeScale(scale[<span class="hljs-number">0</span>], scale[<span class="hljs-number">1</span>], scale[<span class="hljs-number">2</span>]);

  <span class="hljs-comment">// Multiply the matrices.</span>
  <span class="hljs-keyword">var</span> matrix = matrixMultiply(scaleMatrix, rotationZMatrix);
  matrix = matrixMultiply(matrix, rotationYMatrix);
  matrix = matrixMultiply(matrix, rotationXMatrix);
  matrix = matrixMultiply(matrix, translationMatrix);
  matrix = matrixMultiply(matrix, projectionMatrix);

  <span class="hljs-comment">// Set the matrix.</span>
  gl.uniformMatrix4fv(matrixLocation, <span class="hljs-literal">false</span>, matrix);</code></pre>
<p>&#x8FD9;&#x662F;&#x6837;&#x4F8B;&#xFF1A;</p><p><iframe class="webgl_example" style=" " src="http://webglfundamentals.org/webgl/resources/editor.html?url=/webgl/lessons/../webgl-3d-step1.html"></iframe>
<a href="http://webglfundamentals.org/webgl/webgl-3d-step1.html" target="_blank">&#x70B9;&#x51FB;&#x8FD9;&#x91CC;&#x5728;&#x65B0;&#x7A97;&#x53E3;&#x6253;&#x5F00;</a></p><p>The first problem we have is that our geometry is a flat F which makes it hard to see any 3D. To fix that let&apos;s expand the geometry to 3D. Our current F is made of 3 rectangles, 2 triangles each. To make it 3D will require a total of 16 rectangles. That&apos;s quite a few to list out here. 16 rectangles with 2 triangles per rectangle and 3 vertices per triangle is 96 vertices. If you want to see all of them view the source of the sample.</p><p>We have to draw more vertices so</p><p>&#x9996;&#x8981;&#x95EE;&#x9898;&#xFF0C;&#x7531;&#x4E8E;&#x56FE;&#x5F62;&#x662F;&#x6241;&#x5E73;&#x7684;&#x201C;F&#x201D;&#xFF0C;&#x6240;&#x4EE5;&#x5F88;&#x96BE;&#x770B;&#x5230;&#x4EFB;&#x4F55;3D&#x6548;&#x679C;&#x3002;&#x4E3A;&#x4E86;&#x89E3;&#x51B3;&#x8FD9;&#x4E00;&#x95EE;&#x9898;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5C06;&#x56FE;&#x5F62;&#x8F6C;&#x6362;&#x4E3A;3D&#x3002;&#x73B0;&#x5728;&#x7684;&#x201C;F&#x201D;&#x7531;3&#x4E2A;&#x77E9;&#x5F62;&#x7EC4;&#x6210;&#xFF0C;&#x6BCF;&#x4E2A;&#x77E9;&#x5F62;&#x5305;&#x542B;2&#x4E2A;&#x4E09;&#x89D2;&#x5F62;&#x3002;&#x4E3A;&#x4E86;&#x5B9E;&#x73B0;3D&#x7684;&#x201C;F&#x201D;&#xFF0C;&#x9700;&#x8981;16&#x4E2A;&#x77E9;&#x5F62;&#xFF0C;&#x6BCF;&#x4E2A;&#x77E9;&#x5F62;&#x5305;&#x542B;2&#x4E2A;&#x4E09;&#x89D2;&#x5F62;&#xFF0C;&#x6BCF;&#x4E2A;&#x4E09;&#x89D2;&#x5F62;&#x6709;3&#x4E2A;&#x9876;&#x70B9;&#xFF0C;&#x5171;&#x8BA1;96&#x4E2A;&#x9876;&#x70B9;&#x3002;&#x5982;&#x679C;&#x4F60;&#x60F3;&#x67E5;&#x770B;&#x6240;&#x6709;&#x7684;&#x9876;&#x70B9;&#xFF0C;&#x53EF;&#x4EE5;&#x6D4F;&#x89C8;&#x6837;&#x4F8B;&#x7684;&#x6E90;&#x7801;&#x3002;</p><p>&#x53EF;&#x4EE5;&#x50CF;&#x8FD9;&#x6837;&#x7ED8;&#x5236;&#x66F4;&#x591A;&#x7684;&#x9876;&#x70B9;&#xFF1A;</p><pre><code class="lang-js">    <span class="hljs-comment">// Draw the geometry.</span>
    gl.drawArrays(gl.TRIANGLES, <span class="hljs-number">0</span>, <span class="hljs-number">16</span> * <span class="hljs-number">6</span>);</code></pre>
<p>&#x8FD9;&#x91CC;&#x662F;&#x4E0A;&#x9762;&#x7684;&#x6837;&#x4F8B;&#xFF1A;</p><p><iframe class="webgl_example" style=" " src="http://webglfundamentals.org/webgl/resources/editor.html?url=/webgl/lessons/../webgl-3d-step2.html"></iframe>
<a href="http://webglfundamentals.org/webgl/webgl-3d-step2.html" target="_blank">&#x70B9;&#x51FB;&#x8FD9;&#x91CC;&#x5728;&#x65B0;&#x7A97;&#x53E3;&#x4E2D;&#x6253;&#x5F00;</a></p><p>Moving the sliders it&apos;s pretty hard to tell that it&apos;s 3D. Let&apos;s try coloring each rectangle a different color. To do this we will add another attribute to our vertex shader and a varying to pass it from the vertex shader to the fragment shader.</p><p>Here&apos;s the new vertex shader</p><p>&#x5C3D;&#x7BA1;&#x80FD;&#x4E0D;&#x65AD;&#x79FB;&#x52A8;&#x6ED1;&#x5757;&#xFF0C;&#x4F46;&#x8FD8;&#x662F;&#x5F88;&#x96BE;&#x5206;&#x8FA8;&#x51FA;&#x8FD9;&#x662F;3D&#x56FE;&#x5F62;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x5C1D;&#x8BD5;&#x7ED9;&#x6BCF;&#x4E2A;&#x77E9;&#x5F62;&#x6DFB;&#x52A0;&#x4E0D;&#x540C;&#x989C;&#x8272;&#x3002;&#x4E3A;&#x4E86;&#x8FBE;&#x5230;&#x8FD9;&#x4E00;&#x76EE;&#x7684;&#xFF0C;&#x9700;&#x8981;&#x7ED9;&#x9876;&#x70B9;&#x7740;&#x8272;&#x5668;&#x6DFB;&#x52A0;&#x53E6;&#x5916;&#x7684;attribute&#xFF0C;&#x7136;&#x540E;&#x901A;&#x8FC7;varing&#x4F20;&#x9012;&#x7ED9;&#x7247;&#x6BB5;&#x7740;&#x8272;&#x5668;&#x3002;</p><p>&#x65B0;&#x7684;&#x9876;&#x70B9;&#x7740;&#x8272;&#x5668;&#xFF1A;</p><pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;3d-vertex-shader&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;x-shader/x-vertex&quot;</span>&gt;</span><span class="actionscript">
attribute vec4 a_position;
attribute vec4 a_color;

uniform mat4 u_matrix;

varying vec4 v_color;

<span class="hljs-keyword">void</span> main() {
  <span class="hljs-comment">// Multiply the position by the matrix.</span>
  gl_Position = u_matrix * a_position;

  <span class="hljs-comment">// Pass the color to the fragment shader.</span>
  v_color = a_color;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre>
<p>And we need to use that color in the fragment shader</p><p>&#x7136;&#x540E;&#x5728;&#x7247;&#x6BB5;&#x7740;&#x8272;&#x5668;&#xFF08;fragment shader&#xFF09;&#x4E2D;&#x4F7F;&#x7528;varing&#xFF1A;</p><pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;3d-vertex-shader&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;x-shader/x-fragment&quot;</span>&gt;</span><span class="actionscript">
precision mediump float;

<span class="hljs-comment">// Passed in from the vertex shader.</span>
varying vec4 v_color;

<span class="hljs-keyword">void</span> main() {
   gl_FragColor = v_color;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre>
<p>We need to lookup the location to supply the colors, then setup another buffer and attribute to give it the colors.</p><p>&#x63A5;&#x4E0B;&#x6765;&#xFF0C;&#x9700;&#x8981;&#x5728;&#x76F8;&#x5E94;&#x4F4D;&#x7F6E;&#x5E94;&#x7528;&#x989C;&#x8272;&#xFF0C;&#x6240;&#x4EE5;&#x518D;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x7F13;&#x51B2;&#x5668;&#xFF08;buffer&#xFF09;&#x548C;attribute&#x7528;&#x6765;&#x63A5;&#x6536;&#x989C;&#x8272;&#xFF1A;</p><pre><code class="lang-js">...
  var colorLocation = gl.getAttribLocation(program, <span class="hljs-string">&quot;a_color&quot;</span>);

  ...
  <span class="hljs-comment">// Create a buffer for colors.</span>
  <span class="hljs-keyword">var</span> buffer = gl.createBuffer();
  gl.bindBuffer(gl.ARRAY_BUFFER, buffer);
  gl.enableVertexAttribArray(colorLocation);

  <span class="hljs-comment">// We&apos;ll supply RGB as bytes.</span>
  gl.vertexAttribPointer(colorLocation, <span class="hljs-number">3</span>, gl.UNSIGNED_BYTE, <span class="hljs-literal">true</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);

  <span class="hljs-comment">// Set Colors.</span>
  setColors(gl);

  ...
<span class="hljs-comment">// Fill the buffer with colors for the &apos;F&apos;.</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setColors</span>(<span class="hljs-params">gl</span>) </span>{
  gl.bufferData(
      gl.ARRAY_BUFFER,
      <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>([
          <span class="hljs-comment">// left column front</span>
        <span class="hljs-number">200</span>,  <span class="hljs-number">70</span>, <span class="hljs-number">120</span>,
        <span class="hljs-number">200</span>,  <span class="hljs-number">70</span>, <span class="hljs-number">120</span>,
        <span class="hljs-number">200</span>,  <span class="hljs-number">70</span>, <span class="hljs-number">120</span>,
        <span class="hljs-number">200</span>,  <span class="hljs-number">70</span>, <span class="hljs-number">120</span>,
        <span class="hljs-number">200</span>,  <span class="hljs-number">70</span>, <span class="hljs-number">120</span>,
        <span class="hljs-number">200</span>,  <span class="hljs-number">70</span>, <span class="hljs-number">120</span>,

          <span class="hljs-comment">// top rung front</span>
        <span class="hljs-number">200</span>,  <span class="hljs-number">70</span>, <span class="hljs-number">120</span>,
        <span class="hljs-number">200</span>,  <span class="hljs-number">70</span>, <span class="hljs-number">120</span>,
        ...
        ...
      gl.STATIC_DRAW);
}</code></pre>
<p>&#x5F97;&#x5230;&#x7ED3;&#x679C;&#xFF1A;</p><p><iframe class="webgl_example" style=" " src="http://webglfundamentals.org/webgl/resources/editor.html?url=/webgl/lessons/../webgl-3d-step3.html"></iframe>
<a href="http://webglfundamentals.org/webgl/webgl-3d-step3.html" target="_blank">&#x70B9;&#x51FB;&#x8FD9;&#x91CC;&#x5728;&#x65B0;&#x7A97;&#x53E3;&#x4E2D;&#x6253;&#x5F00;</a></p><p>Uh oh, what&apos;s that mess? Well, it turns out all the various parts of that 3D &apos;F&apos;, front, back, sides, etc get drawn in the order they appear in in our geometry. That doesn&apos;t give us quite the desired results as sometimes the ones in the back get drawn after the ones in the front.</p><p>&#x5443;&#x3002;&#x3002;&#x7ED3;&#x679C;&#x770B;&#x8D77;&#x6765;&#x5F88;&#x7CDF;&#x7CD5;&#x3002;&#x4EFF;&#x4F5B;&#x8FD9;&#x4E2A;3D&#x201C;F&#x201D;&#x7684;&#x6240;&#x6709;&#x90E8;&#x5206;&#xFF0C;&#x5982;&#x6B63;&#x9762;&#x3001;&#x80CC;&#x9762;&#x3001;&#x4FA7;&#x9762;&#x3001;&#x7B49;&#x7B49;&#x90FD;&#x6309;&#x7167;&#x5728;&#x56FE;&#x5F62;&#x4E2D;&#x51FA;&#x73B0;&#x7684;&#x987A;&#x5E8F;&#x88AB;&#x7ED8;&#x5236;&#x4E86;&#x51FA;&#x6765;&#x3002;&#x6709;&#x7684;&#x65F6;&#x5019;&#x56FE;&#x5F62;&#x80CC;&#x9762;&#x540E;&#x4E8E;&#x6B63;&#x9762;&#x88AB;&#x7ED8;&#x5236;&#xFF0C;&#x8FD9;&#x5E76;&#x4E0D;&#x662F;&#x6211;&#x4EEC;&#x60F3;&#x8981;&#x7684;&#x7ED3;&#x679C;&#x3002;</p><p>Triangles in WebGL have the concept of front facing and back facing. A front facing triangle has its vertices go in a clockwise direction. A back facing triangle has its vertices go in a counter clockwise direction</p><p>&#x5728;WebGL&#x4E2D;&#x4E09;&#x89D2;&#x5F62;&#x5206;&#x4E3A;&#x80CC;&#x9762;&#xFF08;Back Face&#xFF09;&#x548C;&#x6B63;&#x9762;&#xFF08;Front Face&#xFF09;&#x3002;&#x4E00;&#x4E2A;&#x6B63;&#x9762;&#x4E09;&#x89D2;&#x5F62;&#xFF0C;&#x5176;&#x9876;&#x70B9;&#x6392;&#x5217;&#x662F;&#x987A;&#x65F6;&#x9488;&#x65B9;&#x5411;&#xFF08;Clockwise&#xFF09;&#x3002;&#x80CC;&#x9762;&#x4E09;&#x89D2;&#x5F62;&#xFF0C;&#x5176;&#x9876;&#x70B9;&#x6392;&#x5217;&#x5219;&#x662F;&#x9006;&#x65F6;&#x9488;&#x65B9;&#x5411;&#xFF08;Counter Clockwise&#xFF09;&#x3002;</p><p><img src="http://oc3wui92y.bkt.clouddn.com/SVG/webgl/triangle-winding.svg"></p><p>WebGL has the ability to draw only forward facing or back facing triangles. We can turn that feature on with</p><p>WebGL&#x6709;&#x80FD;&#x529B;&#x9009;&#x62E9;&#x53EA;&#x7ED8;&#x5236;&#x6B63;&#x9762;&#x4E09;&#x89D2;&#x5F62;&#x6216;&#x8005;&#x80CC;&#x9762;&#x4E09;&#x89D2;&#x5F62;&#x3002;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x50CF;&#x4E0B;&#x9762;&#x8FD9;&#x6837;&#x5F00;&#x542F;&#x8FD9;&#x4E2A;&#x529F;&#x80FD;&#xFF1A;</p><pre><code class="lang-js"> gl.enable(gl.CULL_FACE);</code></pre>
<p>which we do just once, right at the start of our program. With that feature turned on, WebGL defaults to &quot;culling&quot; back facing triangles. &quot;Culling&quot; in this case is a fancy word for &quot;not drawing&quot;.</p><p>&#x53EA;&#x9700;&#x5728;&#x7A0B;&#x5E8F;&#x5F00;&#x59CB;&#x7684;&#x65F6;&#x5019;&#x5F00;&#x542F;&#x4E00;&#x6B21;&#x5373;&#x53EF;&#x3002;&#x8BE5;&#x529F;&#x80FD;&#x5F00;&#x542F;&#x540E;&#xFF0C;WebGL&#x4F1A;&#x9ED8;&#x8BA4;&#x201C;Culling&#x201D;&#x80CC;&#x9762;&#x4E09;&#x89D2;&#x5F62;&#x3002;&#x201C;Culling&#x201D;&#x5728;&#x8FD9;&#x91CC;&#x610F;&#x4E3A;&#x201C;&#x4E0D;&#x4E88;&#x7ED8;&#x5236;&#x201D;&#x3002;</p><p>Note that as far as WebGL is concerned, whether or not a triangle is considered to be going clockwise or counter clockwise depends on the vertices of that triangle in clip space. In other words, WebGL figures out whether a triangle is front or back AFTER you&apos;ve applied math to the vertices in the vertex shader. That means for example a clockwise triangle that is scaled in X by -1 becomes a counter clockwise triangle or a clockwise triangle rotated 180 degrees becomes a couter clockwise triangle. Because we had CULL_FACE disabled we can see both clockwise(front) and counter clockwise(back) triangles. Now that we&apos;ve turned it on, any time a front facing triangle flips around either because of scaling or rotation or for whatever reason, WebGL won&apos;t draw it. That&apos;s a good thing since as your turn something around in 3D you generally want whichever triangles are facing you to be considered front facing.</p><p>&#x6CE8;&#x610F;&#xFF0C;&#x5728;WebGL&#x4E2D;&#xFF0C;&#x5224;&#x65AD;&#x4E00;&#x4E2A;&#x4E09;&#x89D2;&#x5F62;&#x662F;&#x987A;&#x65F6;&#x9488;&#x8FD8;&#x662F;&#x9006;&#x65F6;&#x9488;&#x7684;&#x4F9D;&#x636E;&#x662F;&#xFF1A;&#x8BE5;&#x4E09;&#x89D2;&#x5F62;&#x5728;&#x88C1;&#x5207;&#x7A7A;&#x95F4;&#x7684;&#x9876;&#x70B9;&#x987A;&#x5E8F;&#x3002;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;WebGL&#x4F1A;&#x5728;&#x5BF9;&#x9876;&#x70B9;&#x7740;&#x8272;&#x5668;&#x4E2D;&#x7684;&#x9876;&#x70B9;&#x5E94;&#x7528;&#x6570;&#x5B66;&#x8FD0;&#x7B97;&#x540E;&#x65AD;&#x5B9A;&#x4E00;&#x4E2A;&#x4E09;&#x89D2;&#x5F62;&#x7684;&#x671D;&#x5411;&#x662F;&#x6B63;&#x9762;&#x6216;&#x662F;&#x80CC;&#x9762;&#x3002;&#x6BD4;&#x5982;&#xFF0C;&#x4E00;&#x4E2A;&#x9876;&#x70B9;&#x987A;&#x5E8F;&#x4E3A;&#x987A;&#x65F6;&#x9488;&#x7684;&#x4E09;&#x89D2;&#x5F62;&#xFF0C;&#x5728;X&#x65B9;&#x5411;&#x4E0A;&#x5E94;&#x7528;&#x503C;&#x4E3A;-1&#x7684;&#x7F29;&#x653E;&#xFF0C;&#x6216;&#x8005;&#x65CB;&#x8F6C;180&#xB0;&#x540E;&#x90FD;&#x4F1A;&#x53D8;&#x6210;&#x4E00;&#x4E2A;&#x9006;&#x65F6;&#x9488;&#x7684;&#x4E09;&#x89D2;&#x5F62;&#x3002;&#x56E0;&#x4E3A;<strong>CULL_FACE</strong>&#x529F;&#x80FD;&#x8FD8;&#x672A;&#x5F00;&#x542F;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x540C;&#x65F6;&#x770B;&#x5230;&#x987A;&#x65F6;&#x9488;&#xFF08;&#x6B63;&#x9762;&#xFF09;&#x4E09;&#x89D2;&#x5F62;&#x548C;&#x9006;&#x65F6;&#x9488;&#xFF08;&#x80CC;&#x9762;&#xFF09;&#x4E09;&#x89D2;&#x5F62;&#x3002;&#x8BE5;&#x529F;&#x80FD;&#x5F00;&#x542F;&#x540E;&#xFF0C;&#x5F53;&#x4E00;&#x4E2A;&#x6B63;&#x9762;&#x4E09;&#x89D2;&#x5F62;&#x88AB;&#x5E94;&#x7528;&#x7F29;&#x653E;&#x3001;&#x65CB;&#x8F6C;&#xFF0C;&#x6216;&#x5176;&#x5B83;&#x539F;&#x56E0;&#x800C;&#x5DE6;&#x53F3;&#x7FFB;&#x8F6C;&#x7684;&#x65F6;&#x5019;&#xFF0C;WebGL&#x90FD;&#x4E0D;&#x4F1A;&#x7ED8;&#x5236;&#x5B83;&#x3002;&#x8FD9;&#x662F;&#x4E2A;&#x4E0D;&#x9519;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x56E0;&#x4E3A;&#x5F53;&#x7FFB;&#x8F6C;3D&#x56FE;&#x5F62;&#x7684;&#x65F6;&#x5019;&#x59CB;&#x7EC8;&#x5E0C;&#x671B;&#x5448;&#x73B0;&#x9762;&#x5411;&#x6211;&#x4EEC;&#x7684;&#x4E09;&#x89D2;&#x5F62;&#x3002;</p><p>With CULL_FACE turned on this is what we get</p><p>&#x5F00;&#x542F;<strong>CULL_FACE</strong>&#x540E;&#xFF0C;&#x5F97;&#x5230;&#x4E0B;&#x9762;&#x7684;&#x6548;&#x679C;&#xFF1A;</p><p><iframe class="webgl_example" style=" " src="http://webglfundamentals.org/webgl/resources/editor.html?url=/webgl/lessons/../webgl-3d-step4.html"></iframe>
<a href="http://webglfundamentals.org/webgl/webgl-3d-step4.html" target="_blank">&#x70B9;&#x51FB;&#x8FD9;&#x91CC;&#x5728;&#x65B0;&#x7A97;&#x53E3;&#x4E2D;&#x6253;&#x5F00;</a></p><p>Hey! Where did all the triangles go? It turns out, many of them are facing the wrong way. Rotate it and you&apos;ll see them appear when you look at the other side. Fortunately it&apos;s easy to fix. We just look at which ones are backward and exchange 2 of their vertices. For example if one backward triangle is</p><p>&#x563F;&#xFF01;&#xFF01;&#x8FD9;&#x4E9B;&#x4E09;&#x89D2;&#x5F62;&#x8DD1;&#x54EA;&#x53BB;&#x4E86;&#xFF1F;&#x5F88;&#x591A;&#x4E09;&#x89D2;&#x5F62;&#x7684;&#x671D;&#x5411;&#x8C8C;&#x4F3C;&#x90FD;&#x662F;&#x9519;&#x8BEF;&#x7684;&#x3002;&#x65CB;&#x8F6C;&#x4E00;&#x4E0B;&#x5B83;&#x4EEC;&#x5C31;&#x4F1A;&#x5728;&#x53E6;&#x4E00;&#x9762;&#x51FA;&#x73B0;&#x3002;&#x8FD8;&#x597D;&#xFF0C;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x975E;&#x5E38;&#x5BB9;&#x6613;&#x89E3;&#x51B3;&#x3002;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x627E;&#x5230;&#x90A3;&#x4E9B;&#x5E94;&#x671D;&#x5411;&#x6B63;&#x9762;&#x7684;&#x4E09;&#x89D2;&#x5F62;&#xFF0C;&#x7136;&#x540E;&#x6539;&#x53D8;&#x5176;&#x4E2D;&#x4E24;&#x4E2A;&#x9876;&#x70B9;&#x7684;&#x987A;&#x5E8F;&#x5373;&#x53EF;&#x3002;&#x5982;&#x679C;&#x4E00;&#x4E2A;&#x5E94;&#x671D;&#x5411;&#x6B63;&#x9762;&#x7684;&#x4E09;&#x89D2;&#x5F62;&#x662F;&#x4E0B;&#x9762;&#x8FD9;&#x6837;&#xFF1A;</p><pre><code class="lang-js"><span class="hljs-number">1</span>,   <span class="hljs-number">2</span>,   <span class="hljs-number">3</span>,
<span class="hljs-number">40</span>,  <span class="hljs-number">50</span>,  <span class="hljs-number">60</span>,
<span class="hljs-number">700</span>, <span class="hljs-number">800</span>, <span class="hljs-number">900</span>,</code></pre>
<p>we just flip the last 2 vertices to make it forward.</p><p>&#x53EA;&#x9700;&#x4EA4;&#x6362;&#x6700;&#x540E;&#x4E24;&#x4E2A;&#x9876;&#x70B9;&#x7684;&#x4F4D;&#x7F6E;&#x5373;&#x53EF;&#x4F7F;&#x5176;&#x671D;&#x5411;&#x6B63;&#x9762;&#xFF1A;</p><pre><code class="lang-js"><span class="hljs-number">1</span>,   <span class="hljs-number">2</span>,   <span class="hljs-number">3</span>,
<span class="hljs-number">700</span>, <span class="hljs-number">800</span>, <span class="hljs-number">900</span>,
<span class="hljs-number">40</span>,  <span class="hljs-number">50</span>,  <span class="hljs-number">60</span>,</code></pre>
<p>Going through and fixing all the backward triangles gets us to this</p><p>&#x5728;&#x4FEE;&#x6B63;&#x4E86;&#x6240;&#x6709;&#x5E94;&#x671D;&#x5411;&#x6B63;&#x9762;&#x7684;&#x4E09;&#x89D2;&#x5F62;&#x9876;&#x70B9;&#x987A;&#x5E8F;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x5F97;&#x5230;&#x8FD9;&#x6837;&#x7684;&#x7ED3;&#x679C;&#xFF1A;</p><p><iframe class="webgl_example" style=" " src="http://webglfundamentals.org/webgl/resources/editor.html?url=/webgl/lessons/../webgl-3d-step5.html"></iframe>
<a href="http://webglfundamentals.org/webgl/webgl-3d-step5.html" target="_blank">&#x70B9;&#x51FB;&#x8FD9;&#x91CC;&#x5728;&#x65B0;&#x7A97;&#x53E3;&#x4E2D;&#x6253;&#x5F00;</a></p><p>That&apos;s closer but there&apos;s still one more problem. Even with all the triangles facing in the correct direction and with the back facing ones being culled we still have places where triangles that should be in the back are being drawn over triangles that should be in front.</p><p>&#x8FD9;&#x6837;&#x7684;&#x6548;&#x679C;&#x63A5;&#x8FD1;&#x5B8C;&#x7F8E;&#xFF0C;&#x4F46;&#x5728;&#x8FD9;&#x91CC;&#x8FD8;&#x5B58;&#x5728;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#x3002;&#x5C3D;&#x7BA1;&#x6240;&#x6709;&#x4E09;&#x89D2;&#x5F62;&#x7684;&#x671D;&#x5411;&#x6B63;&#x786E;&#xFF0C;&#x5E76;&#x4E14;&#x80CC;&#x9762;&#x4E09;&#x89D2;&#x5F62;&#x90FD;&#x88AB;&#x8BBE;&#x7F6E;&#x4E3A;&#x201C;&#x4E0D;&#x4E88;&#x7ED8;&#x5236;&#x201D;&#xFF0C;&#x8FD8;&#x662F;&#x6709;&#x4E00;&#x4E9B;&#x5E94;&#x5904;&#x4E8E;&#x540E;&#x9762;&#x7684;&#x4E09;&#x89D2;&#x5F62;&#x88AB;&#x7ED8;&#x5236;&#x5728;&#x7406;&#x5E94;&#x5904;&#x4E8E;&#x524D;&#x9762;&#x7684;&#x4E09;&#x89D2;&#x5F62;&#x4E4B;&#x4E0A;&#x3002;</p><p>Enter the DEPTH BUFFER.</p><p>&#x8BA9;&#x6211;&#x4EEC;&#x6765;&#x770B;&#x4E00;&#x770B;&#x6DF1;&#x5EA6;&#x7F13;&#x51B2;&#x5668;&#xFF08;DEPTH BUFFER&#xFF09;&#x3002;</p><p>A depth buffer, sometimes called a Z-Buffer, is a rectangle of depth pixels, one depth pixel for each color pixel used to make the image. As WebGL draws each color pixel it can also draw a depth pixel. It does this based on the values we return from the vertex shader for Z. Just like we had to convert to clip space for X and Y, Z is also in clip space or (-1 to +1). That value is then converted into a depth space value (0 to +1). Before WebGL draws a color pixel it will check the corresponding depth pixel. If the depth value for the pixel it&apos;s about to draw is greater than the value of the corresponding depth pixel then WebGL does not draw the new color pixel. Otherwise it draws both the new color pixel with the color from your fragment shader AND it draws the depth pixel with the new depth value. This means, pixels that are behind other pixels won&apos;t get drawn.</p><p>&#x6DF1;&#x5EA6;&#x7F13;&#x51B2;&#x5668;&#x6709;&#x65F6;&#x4E5F;&#x88AB;&#x79F0;&#x4F5C;Z-Buffer&#xFF0C;&#x5B83;&#x7531;&#x4E00;&#x8FDE;&#x4E32;&#x7684;&#x6DF1;&#x5EA6;&#x50CF;&#x7D20;&#x7EC4;&#x6210;&#x3002;&#x6BCF;&#x6B21;&#x7684;&#x6210;&#x50CF;&#x90FD;&#x4F1A;&#x7528;&#x5230;&#x6BCF;&#x4E2A;&#x989C;&#x8272;&#x50CF;&#x7D20;&#x5BF9;&#x5E94;&#x7684;&#x6DF1;&#x5EA6;&#x50CF;&#x7D20;&#x3002;WebGL&#x7ED8;&#x5236;&#x6BCF;&#x4E2A;&#x989C;&#x8272;&#x50CF;&#x7D20;&#x7684;&#x540C;&#x65F6;&#xFF0C;&#x90FD;&#x4F1A;&#x7ED8;&#x5236;&#x5176;&#x6DF1;&#x5EA6;&#x50CF;&#x7D20;&#x3002;&#x6DF1;&#x5EA6;&#x50CF;&#x7D20;&#x7684;&#x7ED8;&#x5236;&#x662F;&#x57FA;&#x4E8E;&#x9876;&#x70B9;&#x7740;&#x8272;&#x5668;&#x4E2D;&#x9876;&#x70B9;&#x7684;Z&#x5750;&#x6807;&#x3002;&#x5C31;&#x50CF;X&#x5750;&#x6807;&#x548C;Y&#x5750;&#x6807;&#x4E00;&#x6837;&#xFF0C;Z&#x5750;&#x6807;&#x540C;&#x6837;&#x5904;&#x4E8E;&#x88C1;&#x5207;&#x7A7A;&#x95F4;&#x6216;&#x8005;&#x8BF4;&#x5728;&#xFF08;-1 ~ +1&#xFF09;&#x4E2D;&#x3002;&#x5728;&#x6B64;&#x4E4B;&#x540E;Z&#x53C8;&#x4F1A;&#x88AB;&#x8F6C;&#x6362;&#x4E3A;&#x6DF1;&#x5EA6;&#x7A7A;&#x95F4;&#x503C;&#xFF08;0 ~ +1&#xFF09;&#x3002;WebGL&#x5728;&#x7ED8;&#x5236;&#x989C;&#x8272;&#x50CF;&#x7D20;&#x524D;&#xFF0C;&#x4F1A;&#x68C0;&#x67E5;&#x8BE5;&#x50CF;&#x7D20;&#x5BF9;&#x5E94;&#x7684;&#x6DF1;&#x5EA6;&#x50CF;&#x7D20;&#x3002;&#x5982;&#x679C;&#x5C06;&#x8981;&#x7ED8;&#x5236;&#x7684;&#x6DF1;&#x5EA6;&#x503C;&#x5927;&#x4E8E;&#x5F53;&#x524D;&#x50CF;&#x7D20;&#x7684;&#x6DF1;&#x5EA6;&#x503C;&#xFF0C;&#x90A3;&#x4E48;&#x65B0;&#x7684;&#x989C;&#x8272;&#x50CF;&#x7D20;&#x5C06;&#x4E0D;&#x4F1A;&#x88AB;&#x7ED8;&#x5236;&#x3002;&#x5426;&#x5219;&#xFF0C;&#x4E0D;&#x4EC5;&#x4F1A;&#x4ECE;&#x7247;&#x6BB5;&#x7740;&#x8272;&#x5668;&#x4E2D;&#x53D6;&#x51FA;&#x989C;&#x8272;&#x6765;&#x7ED8;&#x5236;&#x65B0;&#x7684;&#x989C;&#x8272;&#x50CF;&#x7D20;&#xFF0C;&#x8FD8;&#x4F1A;&#x4EE5;&#x65B0;&#x7684;&#x6DF1;&#x5EA6;&#x503C;&#x6765;&#x7ED8;&#x5236;&#x6DF1;&#x5EA6;&#x50CF;&#x7D20;&#x3002;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;&#x85CF;&#x5728;&#x5176;&#x5B83;&#x50CF;&#x7D20;&#x4E4B;&#x540E;&#x7684;&#x50CF;&#x7D20;&#x90FD;&#x4E0D;&#x4F1A;&#x88AB;&#x7ED8;&#x5236;&#x3002;</p><p>We can turn on this feature nearly as simply as we turned on culling with</p><p>&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x50CF;&#x5F00;&#x542F;&#x201C;Culling&#x201D;&#x4E00;&#x6837;&#x8F7B;&#x677E;&#x7684;&#x5730;&#x5F00;&#x542F;&#x8FD9;&#x4E2A;&#x529F;&#x80FD;&#xFF1A;</p><pre><code class="lang-js">gl.enable(gl.DEPTH_TEST);</code></pre>
<p>We also need to clear the depth buffer back to 1.0 before we start drawing.</p><p>&#x5728;&#x5F00;&#x59CB;&#x7ED8;&#x5236;&#x56FE;&#x5F62;&#x524D;&#xFF0C;&#x8FD8;&#x9700;&#x8981;&#x5C06;&#x6DF1;&#x5EA6;&#x7F13;&#x51B2;&#x5668;&#x91CD;&#x7F6E;&#x4E3A;1.0&#xFF1A;</p><pre><code class="lang-js"><span class="hljs-comment">// Draw the scene.</span>
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">drawScene</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-comment">// Clear the canvas AND the depth buffer.</span>
    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);
    ...</code></pre>
<p>And now we get</p><p>&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x5F97;&#x5230;&#x4E0B;&#x9762;&#x7684;&#x6548;&#x679C;&#xFF1A;</p><p><iframe class="webgl_example" style=" " src="http://webglfundamentals.org/webgl/resources/editor.html?url=/webgl/lessons/../webgl-3d-step6.html"></iframe>
<a href="http://webglfundamentals.org/webgl/webgl-3d-step6.html" target="_blank">&#x70B9;&#x51FB;&#x8FD9;&#x91CC;&#x5728;&#x65B0;&#x7A97;&#x53E3;&#x4E2D;&#x6253;&#x5F00;</a></p><p>which is 3D!</p><p>&#x8FD9;&#x5C31;&#x662F;3D!!!</p><p>In the next post I&apos;ll go over how to make it have perspective.</p><p>&#x4E0B;&#x4E00;&#x7BC7;&#x6587;&#x7AE0;&#xFF0C;&#x6211;&#x4EEC;&#x5C06;&#x8BA8;&#x8BBA;&#x5982;&#x4F55;<a href="http://webglfundamentals.org/webgl/lessons/webgl-3d-perspective.html" target="_blank">&#x6DFB;&#x52A0;&#x900F;&#x89C6;&#x6548;&#x679C;</a></p>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="./" class="navigation navigation-prev " aria-label="Previous page: 3D">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="WebGL-3D-Perspective.html" class="navigation navigation-next " aria-label="Next page: WebGL 3D Perspective">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"WebGL - Orthographic 3D","level":"1.5.1","depth":2,"next":{"title":"WebGL 3D Perspective","level":"1.5.2","depth":2,"path":"3D/WebGL-3D-Perspective.md","ref":"3D/WebGL-3D-Perspective.md","articles":[]},"previous":{"title":"3D","level":"1.5","depth":1,"path":"3D/README.md","ref":"3D/README.md","articles":[{"title":"WebGL - Orthographic 3D","level":"1.5.1","depth":2,"path":"3D/WebGL-Orthographic-3D.md","ref":"3D/WebGL-Orthographic-3D.md","articles":[]},{"title":"WebGL 3D Perspective","level":"1.5.2","depth":2,"path":"3D/WebGL-3D-Perspective.md","ref":"3D/WebGL-3D-Perspective.md","articles":[]},{"title":"WebGL 3D - Cameras","level":"1.5.3","depth":2,"path":"3D/WebGL-3D-Cameras.md","ref":"3D/WebGL-3D-Cameras.md","articles":[]}]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["livereload"],"pluginsConfig":{"livereload":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"3D/WebGL-Orthographic-3D.md","mtime":"2016-09-30T12:51:26.000Z","type":"markdown"},"gitbook":{"version":"3.2.0","time":"2016-09-30T12:55:45.235Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

